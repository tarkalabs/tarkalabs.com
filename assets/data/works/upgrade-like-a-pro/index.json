{"hash":"9b98ffde05f95c4eef2cd559210832bde30702c7","data":{"caseStudy":{"id":"fbf1e5cd529a376e2d0541653d655159","title":"Upgrade legacy application like a pro","clientId":28,"bannerText":"Upgrade legacy application like a pro","tech":"ruby, rails","content":"<h1 id=\"background\"><a href=\"#background\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Background</h1>\n<p>There are many companies out there that help you upgrade your legacy Rails application. We here at Tarka Labs aren‚Äôt just great at upgrading your Rails application from the old rusty rails version to the new shiny one but we do it <em>on time</em> and <em>under budget</em>.</p>\n<p>We don‚Äôt just specialize in writing beautiful code but also in building beautiful cost-effective infrastructure to run your application on.</p>\n<h2 id=\"so-how-do-we-upgrade-rails-application-like-a-pro-you-ask\"><a href=\"#so-how-do-we-upgrade-rails-application-like-a-pro-you-ask\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>So how do we upgrade rails application like a pro you ask?</h2>\n<p>Follow along, we will explain all the things we did that made rails upgrades look like a relaxed walk on the park for our customer</p>\n<h1 id=\"results\"><a href=\"#results\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Results</h1>\n<p>First, let us show you what our customers were able to achieve at the end of this whole upgrade project</p>\n<h2 id=\"on-time-delivery\"><a href=\"#on-time-delivery\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>On time delivery</h2>\n<p>We understand that time is money for our clients. So, we value delivering things on time. We plan and then we execute. But just like life, software development is full of surprises. Things don‚Äôt always go as planned. That‚Äôs where effective and timely communication comes in.</p>\n<h2 id=\"clear-communication\"><a href=\"#clear-communication\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Clear Communication</h2>\n<p>We believe in clear communication with all the stakeholders. We used platforms like daily standup and progress update meetings to keep stakeholders in the loop on what‚Äôs happening. That‚Äôs where we can ask questions, set expectations, discuss changes in plan, etc.</p>\n<h2 id=\"free-in-the-long-run\"><a href=\"#free-in-the-long-run\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Free (In the long run)</h2>\n<p>Saved best for the last! We are really good at finding cost optimization centers. It can be your infrastructure, an API service you might be using, a 3rd party tool you might be using, etc. We make sure that you are getting the most out of your investments (be it infrastructure or us).</p>\n<p>With all the savings we were able to do, Our service paid for itself üòÅ</p>\n<h1 id=\"overview\"><a href=\"#overview\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Overview</h1>\n<p><span class=\"redacted\">client name</span> is a company that specializes in insurance software. They had recently acquired a tool for insurance agents to generate leads and sell more insurance products. It is built in Ruby on Rails with Postgres as a datastore and Sidekiq for processing background jobs.</p>\n<p>The application used an outdated version of Ruby on Rails (4.2) and Ruby (2.4). They wanted to move to a more recent version to fix common vulnerabilities and exposures that the outdated versions of Rails and Ruby had.</p>\n<p>The deployment of the app was also dependent on a single developer. The client also wants to increase the <a href=\"https://en.wikipedia.org/wiki/Bus_factor\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">\"Truck Factor\"</a> of this application.</p>\n<h1 id=\"approach\"><a href=\"#approach\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Approach</h1>\n<p>We started a 3 month engagement with the primary goal of updating the Rails version to 7.1.3.4 and Ruby to 3.3.0.</p>\n<h2 id=\"small-dedicated-team\"><a href=\"#small-dedicated-team\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Small dedicated team</h2>\n<p>We were a team of 3 developers, 1 QA, and a few senior folks overlooking the engagement. The first couple of days were spent understanding the codebase and hashing out a plan for the upgrade.</p>\n<h2 id=\"incremental-upgrades\"><a href=\"#incremental-upgrades\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Incremental upgrades</h2>\n<p>We went ahead with an incremental strategy so that we could catch bugs quickly and release frequently.</p>\n<figure>\n  <img src=\"/upgrade-pro/upgrade-plan.png\"/>\n</figure>\n<h2 id=\"premptive-planning\"><a href=\"#premptive-planning\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Premptive planning</h2>\n<p>We used tools like RailsBump to identify gem compatibility with newer versions of Rails. We found alternatives for gems that were not supported / maintained for newer versions (eg. Paperclip).</p>\n<p>The rails upgrade guide was our holy grail to list down the changes between rails versions and then understand their impact on the codebase.</p>\n<h2 id=\"devops-optimisation\"><a href=\"#devops-optimisation\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>DevOps Optimisation</h2>\n<p>As a part of this rails upgrade engagement, we also decided to overhaul the application deployment process. The deployment process they had used Capistrano to deploy to 2 EC2 instances.</p>\n<ul>\n<li>Containerized the application</li>\n<li>Included secret management store</li>\n<li>Enabled auto revert in case of deployment failures</li>\n<li>Added log aggregator</li>\n<li>Enabled auto scaling</li>\n</ul>\n<h2 id=\"infrastructure-cost-reduction\"><a href=\"#infrastructure-cost-reduction\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Infrastructure cost reduction</h2>\n<p>Eventhough this is not part of the rails upgrade plan, Since Tarka labs developers see the problem holistically, We highlighted that they are utilising only 20% of the EC2 instances CPU resource. And they can save by switching to AWS Elastic Container Services (ECS).</p>\n<p>We included also this in our plan and successfully updated their infra for better utilisation and cost. We used</p>\n<ul>\n<li>AWS Elastic Container Registry ‚Äì To hold docker images</li>\n<li>AWS Elastic Container Service ‚Äì To manage and deploy the docker images</li>\n<li>AWS Elastic File System ‚Äì For centrally managing the container state</li>\n<li>AWS Parameter Store ‚Äì For storing environment variables and secrets</li>\n<li>AWS Cloudwatch ‚Äì For logging server logs</li>\n<li>Terraform scripts to keep infrastructure as code</li>\n</ul>\n<figure>\n  <img src=\"/upgrade-pro/infra.png\"/>\n</figure>\n<h1 id=\"challenges\"><a href=\"#challenges\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Challenges</h1>\n<p>There is project without challenges and we had our fair share of them here as well. We had a great team and customer collaboration to overcome all of these</p>\n<h2 id=\"no-documentation\"><a href=\"#no-documentation\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>No Documentation</h2>\n<p>There was no dev documentation around setting up the project. We were on our own in figuring out on how to setup the application on our local machines</p>\n<h2 id=\"no-application-context\"><a href=\"#no-application-context\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>No application context</h2>\n<p>Since the application was acquired by the client, they had no context on some of the design decisions that were taken. Our team was able to deep dive, look at the version history of the files to paint the big picture</p>\n<h1 id=\"conclusion\"><a href=\"#conclusion\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Conclusion</h1>\n<h2 id=\"put-in-the-effort-where-it-matters-most\"><a href=\"#put-in-the-effort-where-it-matters-most\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Put in the effort where it matters most</h2>\n<p>In conclusion, we delivered the project on time because of planning the work and dividing it efficiently among the team.</p>\n<p>The team worked together to make sure they were unblocked and had everything in order to progress. If clarification was required, we promptly raised it to the client.</p>\n<p>Agile ceremonies like standup calls, sprint retrospectives helped us assess where we lacked and what can be done to improve our velocity</p>\n"},"clients":{"edges":[{"node":{"id":"36","name":"Music Distribution Company","style":"electricIndigo","logo":""}},{"node":{"id":"35","name":"Global Record Label","style":"fullBlack","logo":""}},{"node":{"id":"34","name":"Starz","style":"dark-blue","logo":""}},{"node":{"id":"33","name":"FamilyCloud","style":"electricIndigo","logo":""}},{"node":{"id":"32","name":"Redacted","style":"fullBlack","logo":""}},{"node":{"id":"31","name":"Redacted","style":"pricebook-orange","logo":""}},{"node":{"id":"30","name":"Redacted","style":"electricIndigo","logo":""}},{"node":{"id":"29","name":"AGS","style":"red","logo":""}},{"node":{"id":"28","name":"Redacted","style":"green","logo":""}},{"node":{"id":"27","name":"Hotstar","style":"fullBlack","logo":"org/hotstar.png"}},{"node":{"id":"26","name":"Framework","style":"fullBlack","logo":"org/framework.svg"}},{"node":{"id":"25","name":"Routinr","style":"purple-blue","logo":"org/routinr.svg"}},{"node":{"id":"24","name":"eVisitNB","style":"red","logo":""}},{"node":{"id":"23","name":"EquipmentFX","style":"yellow","logo":""}},{"node":{"id":"22","name":"Beatclub","style":"dark-grey","logo":"org/beatclub.svg"}},{"node":{"id":"21","name":"Social Lab","style":"yellow","logo":""}},{"node":{"id":"20","name":"IFAD","style":"yellow","logo":""}},{"node":{"id":"19","name":"10i Commerce","style":"dark-blue","logo":""}},{"node":{"id":"18","name":"IDExcel","style":"grey","logo":""}},{"node":{"id":"17","name":"Aisle","style":"green","logo":""}},{"node":{"id":"16","name":"Trazaar","style":"yellow","logo":""}},{"node":{"id":"15","name":"Jiffle Now","style":"pink","logo":""}},{"node":{"id":"14","name":"Farmstead","style":"green","logo":""}},{"node":{"id":"13","name":"Inkl","style":"dark-blue","logo":""}},{"node":{"id":"12","name":"Glydel","style":"grey","logo":""}},{"node":{"id":"11","name":"Messaging Solution Provider","style":"black","logo":""}},{"node":{"id":"10","name":"EAM360","style":"eam-blue","logo":"org/eam360.svg"}},{"node":{"id":"9","name":"TuneCore","style":"black","logo":""}},{"node":{"id":"8","name":"Abridge","style":"orange","logo":""}},{"node":{"id":"7","name":"GE Digital Services","style":"green","logo":""}},{"node":{"id":"6","name":"Gaea Global","style":"red","logo":""}},{"node":{"id":"5","name":"Genetic Direction","style":"dark-blue","logo":""}},{"node":{"id":"4","name":"IDEO","style":"yellow","logo":""}},{"node":{"id":"3","name":"Fankave","style":"black","logo":""}},{"node":{"id":"2","name":"Caratlane","style":"blue","logo":""}},{"node":{"id":"1","name":"Modus","style":"pink","logo":""}}]}},"context":{}}