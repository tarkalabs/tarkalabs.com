<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Build your first Swift command-line tool with ArgumentParser ¬∑ Tarka Labs - Tarka Labs</title><meta name="gridsome:hash" content="1649211d25fe75c28e001e17d54192a916c09cd4"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="viewport" content="width=device-width, initial-scale=1.0"><meta data-vue-tag="ssr" property="og:title" content="Build your first Swift command-line tool with ArgumentParser ¬∑ Tarka Labs"><meta data-vue-tag="ssr" property="og:description" content="Using Swift Package Manager (SPM) and swift-argument-parser, it&#x27;s easy to create command-line tools in Swift. Here&#x27;s how you can do it."><meta data-vue-tag="ssr" property="og:image" content="/assets/img/build-your-first-swift-command-line-tool-with-argumentparser.f6056833.webp"><meta data-vue-tag="ssr" property="og:image:height" content="627"><meta data-vue-tag="ssr" property="og:image:width" content="1200"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.92f6d0f06feb6aec5e019521ff224fd8.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.92f6d0f06feb6aec5e019521ff224fd8.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.92f6d0f06feb6aec5e019521ff224fd8.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.92f6d0f06feb6aec5e019521ff224fd8.png"><link rel="preload" href="/assets/css/0.styles.d3380898.css" as="style"><link rel="preload" href="/assets/js/app.0e5d4a8b.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--blog-vue.2099f288.js" as="script"><link rel="stylesheet" href="/assets/css/0.styles.d3380898.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
    <meta
      name="google-site-verification"
      content="j7cLUK-kxGEpMOY7valSkamH4kQe_l38yMMAXbpk19U"
    />
    <noscript>
      <div class="noscript-container">
        <a href="/" class="noscript-logo">Tarka <br />_Labs</a>
        <div class="noscript-text-container">
          <h1>Uh oh! Looks like <span>JavaScript</span> is disabled.</h1>
          <p>
            Bitman requires <span>JavaScript</span> to fuel his thirst to end
            bad UX and lazy design, which is necessary to give you the best
            viewing experience possible. Please enable it to continue to our
            website.
          </p>
        </div>
      </div>
    </noscript>
  </head>

  <body >
    <div><div id="app" data-server-rendered="true" data-v-b5a9baaa><div data-v-b5a9baaa><div id="banner-section" data-v-b5a9baaa><div class="banner" style="background:;display:none;" data-v-b5a9baaa><div class="layout" data-v-b5a9baaa><div data-v-b5a9baaa></div><div class="hero heading-size-5" style="color:#ffffff;" data-v-b5a9baaa></div><div data-v-b5a9baaa></div></div></div><div data-v-b5a9baaa></div></div><div class="sidebar" data-v-d6d2017e data-v-b5a9baaa><div class="nav" data-v-d6d2017e><div class="fixed" data-v-d6d2017e><a href="/" data-v-9b1a4c9c data-v-d6d2017e> TARKA<br data-v-9b1a4c9c>_LABS </a><div class="menu" data-v-50705736 data-v-d6d2017e><div class="control" style="stroke:black;" data-v-50705736><div class="spinner heading-size-9" data-v-02ea7230 data-v-50705736><span class="side-menu-symbol" data-v-02ea7230><span class="menu-symbol rotate180t90" data-v-02ea7230><svg height="10" width="10" data-v-02ea7230><line x1="0" y1="5" x2="10" y2="5" style="stroke-width: 2" data-v-02ea7230></line></svg></span><span class="menu-symbol rotate90t0" data-v-02ea7230><svg height="10" width="10" data-v-02ea7230><line x1="0" y1="5" x2="10" y2="5" style="stroke-width: 2" data-v-02ea7230></line></svg></span></span><span style="vertical-align: middle" data-v-02ea7230> menu </span></div><div class="active-page body-jetbrains-size-11 fade-in" data-v-128e5feb data-v-50705736>
  
</div></div><div class="items hidden" data-v-50705736><ul class="main-nav" data-v-748716d7 data-v-50705736><div class="primary fadeOut sidebar" data-v-748716d7><li data-v-748716d7><a href="/genai" data-v-748716d7>/GenAI</a></li><li data-v-748716d7><a href="https://design.tarkalabs.com/" target="_self" data-v-748716d7>/Design</a></li><li data-v-748716d7><a href="/develop" data-v-748716d7>/Develop</a></li><li data-v-748716d7><a href="/case-studies" data-v-748716d7>
        /Case_Studies
      </a></li><li data-v-748716d7><a href="/careers" data-v-748716d7>/Careers</a></li><li data-v-748716d7><a href="/about" data-v-748716d7>/About</a></li><li data-v-748716d7><a href="/contact" data-v-748716d7>/Contact</a></li></div></ul><ul class="sub body-jetbrains-size-11 fadeOut sidebar" data-v-3cc3824e data-v-50705736><li data-v-3cc3824e><a href="/blogs" class="active" data-v-3cc3824e>/blogs</a></li><li data-v-3cc3824e><a href="/talks" data-v-3cc3824e>/talks</a></li><li data-v-3cc3824e><a href="/train" data-v-3cc3824e>/train</a></li></ul></div></div><a href="/contact" class="heading-size-9" data-v-573e12d8 data-v-d6d2017e>
  Get in<br data-v-573e12d8>touch<span class="arrow" data-v-573e12d8>-&gt;</span></a></div></div><!----></div><div class="baseLayout" data-v-996dafb6 data-v-b5a9baaa><div data-v-996dafb6></div><div data-v-996dafb6><div class="blog-details-page" data-v-996dafb6><div class="inner-section" data-v-996dafb6><p class="heading-size-10 capitalize" data-v-996dafb6>
        /web - 10 min read
      </p><h1 class="title" data-v-996dafb6>Build your first Swift command-line tool with ArgumentParser</h1><div class="author-basic-info" data-v-996dafb6><img src="/assets/img/bitman.9f5fc4e7.png" alt="Ajith Renjala" width="64" data-v-996dafb6><div data-v-996dafb6><p class="heading-size-9 capitalize" data-v-996dafb6>Ajith Renjala</p><p class="body-jetbrains-size-10" data-v-996dafb6>
            A tarkan
          </p></div></div></div><img src="/assets/img/build-your-first-swift-command-line-tool-with-argumentparser.f6056833.webp" alt="Build your first Swift command-line tool with ArgumentParser" class="header-img" data-v-996dafb6><div class="toc-wrapper" data-v-996dafb6><h2 class="heading-size-7" data-v-996dafb6>Table of contents</h2><div class="toc" data-v-996dafb6><a href="#content" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/01</p><p data-v-996dafb6>Intro</p></a><a href="#toc-section-1" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/02</p><p data-v-996dafb6>Setting up the project</p></a><a href="#toc-section-2" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/03</p><p data-v-996dafb6>Option 1: Using Commands</p></a><a href="#toc-section-3" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/04</p><p data-v-996dafb6>Option 2: Using Xcode</p></a><a href="#toc-section-4" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/05</p><p data-v-996dafb6>Defining command-line arguments</p></a><a href="#toc-section-5" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/06</p><p data-v-996dafb6>How to define multiple subcommands</p></a><a href="#toc-section-6" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/07</p><p data-v-996dafb6>Adding enhancements to the tool</p></a><a href="#toc-section-7" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/08</p><p data-v-996dafb6>Named Options</p></a><a href="#toc-section-8" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/09</p><p data-v-996dafb6>OptionGroup</p></a><a href="#toc-section-9" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/10</p><p data-v-996dafb6>Providing Help</p></a><a href="#toc-section-10" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/11</p><p data-v-996dafb6>Installing the tool</p></a><a href="#toc-section-11" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/12</p><p data-v-996dafb6>That‚Äôs all, folks!</p></a></div></div><div id="content" class="content" data-v-996dafb6><p>As a writer, I‚Äôve been using a minimalist editor called <a href="https://typora.io/" target="_blank" rel="nofollow noopener noreferrer">Typora</a> to write my articles, and I absolutely love it. However, I realized that I wanted to be able to analyze the time it takes for readers to go through my articles. This led me to the idea of building a simple command-line tool to estimate the reading time of an input file.</p>
<p>Command-line tools are an efficient way for developers to complete a variety of tasks. Using Swift Package Manager (SPM) and <a href="https://github.com/apple/swift-argument-parser" target="_blank" rel="nofollow noopener noreferrer">swift-argument-parser</a>, it‚Äôs now super easy to create command-line tools in Swift. In this post, let‚Äôs walk through the process of building a tool to estimate reading time using these tools. By the time you‚Äôre done, you‚Äôll have a basic understanding of how to create command-line tools in Swift and be able to apply this knowledge to your own ideas.</p>
<h1 id="toc-section-1"><a href="#setting-up-the-project" aria-hidden="true"><span class="icon icon-link"></span></a>Setting up the project</h1>
<p>Let‚Äôs build a simple tool called <code class="language-inline-text">Readometer</code> (Read-o-meter) that reads an input file, counts the words, estimates the reading time and displays the outcome. You‚Äôll be using Xcode and Swift Package Manager (SPM) to create your tool.</p>
<p>To get started, you need to set up our project and there are two ways to go about it.</p>
<h1 id="toc-section-2"><a href="#option-1-using-commands" aria-hidden="true"><span class="icon icon-link"></span></a>Option 1: Using Commands</h1>
<p>To begin with, you can create a Swift Package using the following commands.</p>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">mkdir</span> Readometer
$ <span class="token builtin class-name">cd</span> Readometer
$ swift package init <span class="token parameter variable">--type</span> executable</code></pre></div>
<p>The command automatically takes the folder name as the name of the executable and generates a basic setup. You can then try following commands to see it in action.</p>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ swift build
$ swift run</code></pre></div>
<p>To continue further with customizing this basic template to fit your needs, launch the project in Xcode.</p>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ xed Package.swift</code></pre></div>
<p>Xcode can now directly open ‚ÄúPackage.swift‚Äù to edit sources, run tests, and so on. Give it a try!</p>
<p>Finally, you need to add the <a href="https://github.com/apple/swift-argument-parser" target="_blank" rel="nofollow noopener noreferrer">swift-argument-parser</a> ‚Äî Apple‚Äôs open-sourced framework for straightforward, type-safe argument parsing for Swift ‚Äî as a dependency to your package, and then include <code class="language-inline-text">"ArgumentParser"</code> as a dependency for your executable target. Your "Package.swift" file will end up looking like this:</p>
<div class="gridsome-highlight" data-language="swift"><pre class="language-swift"><code class="language-swift"><span class="token comment">// swift-tools-version: 5.8</span>
<span class="token comment">// The swift-tools-version declares the minimum version of Swift required to build this package.</span>
‚Äã
<span class="token keyword">import</span> <span class="token class-name">PackageDescription</span>
‚Äã
<span class="token keyword">let</span> package <span class="token operator">=</span> <span class="token class-name">Package</span><span class="token punctuation">(</span>
   name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Readometer"</span></span><span class="token punctuation">,</span>
   products<span class="token punctuation">:</span> <span class="token punctuation">[</span>
       <span class="token punctuation">.</span><span class="token function">executable</span><span class="token punctuation">(</span>
           name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"readometer"</span></span><span class="token punctuation">,</span>
           targets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"Readometer"</span></span><span class="token punctuation">]</span>
       <span class="token punctuation">)</span><span class="token punctuation">,</span>
   <span class="token punctuation">]</span><span class="token punctuation">,</span>
   dependencies<span class="token punctuation">:</span> <span class="token punctuation">[</span>
       <span class="token punctuation">.</span><span class="token function">package</span><span class="token punctuation">(</span>url<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"https://github.com/apple/swift-argument-parser.git"</span></span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">upToNextMajor</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"1.0.0"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   <span class="token punctuation">]</span><span class="token punctuation">,</span>
   targets<span class="token punctuation">:</span> <span class="token punctuation">[</span>
       <span class="token punctuation">.</span><span class="token function">executableTarget</span><span class="token punctuation">(</span>
           name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Readometer"</span></span><span class="token punctuation">,</span>
           dependencies<span class="token punctuation">:</span> <span class="token punctuation">[</span>
               <span class="token punctuation">.</span><span class="token function">product</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"ArgumentParser"</span></span><span class="token punctuation">,</span> package<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"swift-argument-parser"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
           <span class="token punctuation">]</span><span class="token punctuation">,</span>
           path<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Sources"</span></span>
       <span class="token punctuation">)</span><span class="token punctuation">,</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">)</span></code></pre></div>
<h1 id="toc-section-3"><a href="#option-2-using-xcode" aria-hidden="true"><span class="icon icon-link"></span></a>Option 2: Using Xcode</h1>
<p>Or alternatively, you can just use Xcode‚Äôs new project template and choose the Command Line Tool application under macOS (as shown in the picture below).</p>
<figure><img src="/blog/build-your-first-swift-command-line-tool-with-argumentparser/xcode-cli.webp" alt="Xcode‚Äôs new project template for CLI"><figcaption>Xcode‚Äôs new project template for CLI</figcaption></figure>
<p>Then, in a typical way, under the Package Dependencies section of the project, search for ‚Äòswift-argument-parser‚Äô and select it.</p>
<p>With these steps, you‚Äôll now have a new Swift command-line tool project set up in Xcode with ArgumentParser added as a dependency. You can now move on to the next step of defining your command-line arguments.</p>
<h1 id="toc-section-4"><a href="#defining-command-line-arguments" aria-hidden="true"><span class="icon icon-link"></span></a>Defining command-line arguments</h1>
<p>Now that you have your project set up, it‚Äôs time to define the expectations. Once you‚Äôve built the <code class="language-inline-text">readometer</code> tool, you should be able to run it like this:</p>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ readometer estimate <span class="token operator">&lt;</span>a <span class="token function">file</span> path<span class="token operator">></span> <span class="token parameter variable">--verbose</span>
Estimated reading time: <span class="token number">10</span> minutes</code></pre></div>
<p>The command in the code above is ‚Äòreadometer‚Äô, the subcommand is ‚Äòestimate‚Äô, ‚Äòa file path‚Äô would be an argument, and a flag is appended.</p>
<p>Create a command that directly accepts the file path argument using ArgumentParser. Subcommand and flag options can wait till later.</p>
<div class="gridsome-highlight" data-language="swift"><pre class="language-swift"><code class="language-swift"><span class="token comment">// Readometer.swift</span>
<span class="token keyword">import</span> <span class="token class-name">ArgumentParser</span>
‚Äã
<span class="token attribute atrule">@main</span>
<span class="token keyword">struct</span> <span class="token class-name">Readometer</span><span class="token punctuation">:</span> <span class="token class-name">ParsableCommand</span> <span class="token punctuation">{</span>
   <span class="token attribute atrule">@Argument</span> <span class="token keyword">var</span> filePath<span class="token punctuation">:</span> <span class="token class-name">String</span>

   <span class="token keyword">static</span> <span class="token keyword">let</span> configuration <span class="token operator">=</span> <span class="token class-name">CommandConfiguration</span><span class="token punctuation">(</span>
       abstract<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"A Swift command-line tool for estimating the reading time of articles."</span></span>
   <span class="token punctuation">)</span>

   <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token punctuation">{</span>
       <span class="token comment">// 1. Extract only text contents from the file</span>
       <span class="token comment">// let plainText = try Readometer.getFileContents(from: inputFile)</span>

       <span class="token comment">// 2. Calculate the estimated reading time in minutes..</span>
       <span class="token comment">// let wordCount = Readometer.wordCount(from: plainText)</span>
       <span class="token comment">// let avgReadingSpeed = 200</span>
       <span class="token comment">// let readingTime = Double(wordCount) / Double(avgReadingSpeed)</span>
‚Äã
       <span class="token comment">// 3. print the estimated reading time..</span>
       <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"‚ú®‚ú®‚ú®\nEstimated reading time: [readingTime] minutes\n‚ú®‚ú®‚ú®"</span></span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Here is what you can do to get the code as seen above:</p>
<ol>
<li>Rename the file ‚Äòmain.swift‚Äô to ‚ÄòReadometer.swift‚Äô and define a struct that follows the <code class="language-inline-text">ParsableCommand</code> protocol.</li>
<li>Did you notice that the type is prefixed with <code class="language-inline-text">@main</code>? That denotes the starting point of your command's execution.</li>
<li>A property wrapper prefixed with <code class="language-inline-text">@Argument</code> acts as a positional command-line input. <code class="language-inline-text">filePath</code> is the first command-line input in this scenario.</li>
<li>You must implement all of your logic in the <code class="language-inline-text">run()</code> method.</li>
</ol>
<p><strong>Note:</strong> The Swift compiler uses either the type marked with <code class="language-inline-text">@main</code> or a ‚Äòmain.swift‚Äô file as the entry point for an executable program. You may use one or the other, but not both.</p>
<p>With these steps, you‚Äôve defined your first command-line arguments and are ready to move on to implementing the subcommand of your tool.</p>
<p>You can always see how it works by executing the following commands:</p>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ swift build
$ swift run readometer /Desktop/Files/index.md</code></pre></div>
<p>To introduce the subcommand <code class="language-inline-text">estimate</code>, let's refactor the Readometer type as shown below.</p>
<div class="gridsome-highlight" data-language="swift"><pre class="language-swift"><code class="language-swift"><span class="token comment">// Readometer.swift</span>
<span class="token keyword">import</span> <span class="token class-name">ArgumentParser</span>
‚Äã
<span class="token attribute atrule">@main</span>
<span class="token keyword">struct</span> <span class="token class-name">Readometer</span><span class="token punctuation">:</span> <span class="token class-name">ParsableCommand</span> <span class="token punctuation">{</span>
   <span class="token keyword">static</span> <span class="token keyword">let</span> configuration <span class="token operator">=</span> <span class="token class-name">CommandConfiguration</span><span class="token punctuation">(</span>
       abstract<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"A Swift command-line tool for estimating the reading time of articles."</span></span><span class="token punctuation">,</span>
       subcommands<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Estimate</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">]</span>
   <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
‚Äã
<span class="token keyword">struct</span> <span class="token class-name">Estimate</span><span class="token punctuation">:</span> <span class="token class-name">ParsableCommand</span> <span class="token punctuation">{</span>
   <span class="token attribute atrule">@Argument</span> <span class="token keyword">var</span> filePath<span class="token punctuation">:</span> <span class="token class-name">String</span>

   <span class="token comment">// Defines the average reading speed in words per minute (wpm)</span>
   <span class="token keyword">static</span> <span class="token keyword">let</span> averageReadingSpeed <span class="token operator">=</span> <span class="token number">200</span>
‚Äã
   <span class="token keyword">static</span> <span class="token keyword">let</span> configuration <span class="token operator">=</span> <span class="token class-name">CommandConfiguration</span><span class="token punctuation">(</span>abstract<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Estimates Reading Time."</span></span><span class="token punctuation">)</span>

   <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token punctuation">{</span>
       <span class="token comment">// 1. Extract only text contents from the file</span>
       <span class="token comment">// let plainText = try Readometer.getFileContents(from: filePath)</span>

       <span class="token comment">// 2. Calculate the estimated reading time in minutes..</span>
       <span class="token comment">// let wordCount = Readometer.wordCount(from: plainText)</span>
       <span class="token comment">// let avgReadingSpeed = Readometer.Estimate.averageReadingSpeed</span>
       <span class="token comment">// let readingTime = Double(wordCount) / Double(avgReadingSpeed)</span>
‚Äã
       <span class="token comment">// 3. print the estimated reading time..</span>
       <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"‚ú®‚ú®‚ú®\nEstimated reading time: [readingTime] minutes\n‚ú®‚ú®‚ú®"</span></span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>As you can see, I‚Äôve used a static <code class="language-inline-text">configuration</code> property to transform <code class="language-inline-text">Readometer</code> to a root command and specify a subcommand. The <code class="language-inline-text">Estimate</code> subcommand similarly conforms the <code class="language-inline-text">ParsableCommand</code> protocol and takes over functionality from the root.</p>
<p>If you‚Äôre wondering why subcommands are needed in the first place, you‚Äôll find out soon enough when you add multiple utility capabilities to the Readometer tool.</p>
<p>Finally, adding a flag is just as simple with ArgumentParser‚Äôs <code class="language-inline-text">@Flag</code> property wrapper.</p>
<div class="gridsome-highlight" data-language="swift"><pre class="language-swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">Estimate</span><span class="token punctuation">:</span> <span class="token class-name">ParsableCommand</span> <span class="token punctuation">{</span>
    <span class="token attribute atrule">@Argument</span> <span class="token keyword">var</span> filePath<span class="token punctuation">:</span> <span class="token class-name">String</span>
    <span class="token attribute atrule">@Flag</span> <span class="token keyword">var</span> verbose <span class="token operator">=</span> <span class="token boolean">false</span>

    <span class="token comment">// Defines the average reading speed in words per minute (wpm)</span>
    <span class="token keyword">static</span> <span class="token keyword">let</span> averageReadingSpeed <span class="token operator">=</span> <span class="token number">200</span>
‚Äã
    <span class="token keyword">static</span> <span class="token keyword">let</span> configuration <span class="token operator">=</span> <span class="token class-name">CommandConfiguration</span><span class="token punctuation">(</span>abstract<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Estimates Reading Time."</span></span><span class="token punctuation">)</span>

    <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token punctuation">{</span>
       <span class="token comment">// 1. Extract only text contents from the file</span>
       <span class="token comment">// let plainText = try Readometer.getFileContents(from: filePath)</span>
       <span class="token keyword">if</span> verbose <span class="token punctuation">{</span>
           <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Estimating reading time for '</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token class-name">String</span><span class="token punctuation">(</span>describing<span class="token punctuation">:</span>inputFile<span class="token operator">?</span><span class="token punctuation">.</span>pathString<span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">'"</span></span><span class="token punctuation">)</span>
       <span class="token punctuation">}</span>

       <span class="token comment">// 2. Calculate the estimated reading time in minutes..</span>
       <span class="token comment">// let wordCount = Readometer.wordCount(from: plainText)</span>
       <span class="token comment">// let avgReadingSpeed = Readometer.Estimate.averageReadingSpeed</span>
       <span class="token comment">// let readingTime = wordCount / avgReadingSpeed</span>
       <span class="token keyword">if</span> verbose <span class="token punctuation">{</span>
           <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Word count/Avg Reading Speed: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">wordCount</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">/</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">avgSpeed</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
       <span class="token punctuation">}</span>

       <span class="token comment">// 3. print the estimated reading time..</span>
       <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"‚ú®‚ú®‚ú®\nEstimated reading time: [readingTime] minutes\n‚ú®‚ú®‚ú®"</span></span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>It‚Äôs finally time to implement an important functionality in your little utility tool. Integrate the following assistance methods and uncomment the relevant commented out sections.</p>
<div class="gridsome-highlight" data-language="swift"><pre class="language-swift"><code class="language-swift"><span class="token keyword">extension</span> <span class="token class-name">Readometer</span> <span class="token punctuation">{</span>
   <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">getFileContents</span><span class="token punctuation">(</span>from filePath<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token operator">-></span> <span class="token class-name">String</span> <span class="token punctuation">{</span>
       <span class="token comment">// Get the path to the file</span>
       <span class="token keyword">guard</span> <span class="token keyword">let</span> inputFile <span class="token operator">=</span> filePath<span class="token punctuation">,</span> <span class="token operator">!</span>inputFile<span class="token punctuation">.</span>isEmpty <span class="token keyword">else</span> <span class="token punctuation">{</span>
           <span class="token keyword">throw</span> <span class="token class-name">RuntimeError</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Please provide the path to a file as an argument."</span></span><span class="token punctuation">)</span>
       <span class="token punctuation">}</span>

       <span class="token comment">// Load the contents of the file into a string</span>
       <span class="token keyword">guard</span> <span class="token keyword">let</span> fileContents <span class="token operator">=</span> <span class="token keyword">try</span><span class="token operator">?</span> <span class="token class-name">String</span><span class="token punctuation">(</span>contentsOfFile<span class="token punctuation">:</span> inputFile<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
           <span class="token keyword">throw</span> <span class="token class-name">RuntimeError</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Couldn't read from '</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">inputFile</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">'!"</span></span><span class="token punctuation">)</span>
       <span class="token punctuation">}</span>

       <span class="token comment">// Determine file type</span>
       <span class="token keyword">guard</span> <span class="token keyword">let</span> fileType <span class="token operator">=</span> <span class="token class-name">FileType</span><span class="token punctuation">(</span>filePath<span class="token punctuation">:</span> inputFile<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
           <span class="token keyword">throw</span> <span class="token class-name">RuntimeError</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Unsupported file type '</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">inputFile</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">'!"</span></span><span class="token punctuation">)</span>
       <span class="token punctuation">}</span>

       <span class="token keyword">let</span> plainText<span class="token punctuation">:</span> <span class="token class-name">String</span>

       <span class="token keyword">switch</span> fileType <span class="token punctuation">{</span>
       <span class="token keyword">case</span> <span class="token punctuation">.</span>text<span class="token punctuation">:</span>
           plainText <span class="token operator">=</span> fileContents

       <span class="token keyword">case</span> <span class="token punctuation">.</span>markdown<span class="token punctuation">:</span>
           <span class="token comment">// Strip Markdown syntax if necessary</span>
           <span class="token keyword">guard</span> <span class="token keyword">let</span> regex <span class="token operator">=</span> <span class="token keyword">try</span><span class="token operator">?</span> <span class="token class-name">NSRegularExpression</span><span class="token punctuation">(</span>
               pattern<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">#"(!?\[.*?\]\(.*?\))|(\*\*.*?\*\*)|(__.*?__)|(`.*?`)|(\*.*?\*)|(_.*?_)|#.*?\n|\n-{3,}\n|`{3}.*?\n|`.*?`"#</span></span>
           <span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
               <span class="token keyword">throw</span> <span class="token class-name">RuntimeError</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Failed to read Markdown file '</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">inputFile</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">'!"</span></span><span class="token punctuation">)</span>
           <span class="token punctuation">}</span>
           plainText <span class="token operator">=</span> regex<span class="token punctuation">.</span><span class="token function">stringByReplacingMatches</span><span class="token punctuation">(</span>
               <span class="token keyword">in</span><span class="token punctuation">:</span> fileContents<span class="token punctuation">,</span>
               range<span class="token punctuation">:</span> <span class="token class-name">NSRange</span><span class="token punctuation">(</span>fileContents<span class="token punctuation">.</span>startIndex<span class="token operator">...</span><span class="token punctuation">,</span> <span class="token keyword">in</span><span class="token punctuation">:</span> fileContents<span class="token punctuation">)</span><span class="token punctuation">,</span>
               withTemplate<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"$1"</span></span><span class="token punctuation">)</span>
       <span class="token punctuation">}</span>

       <span class="token keyword">return</span> plainText
   <span class="token punctuation">}</span>

   <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">wordCount</span><span class="token punctuation">(</span>from plainText<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Int</span> <span class="token punctuation">{</span>

       <span class="token comment">// Split the plain text into words and remove any whitespace or non-alphanumeric characters.</span>
       <span class="token keyword">let</span> words <span class="token operator">=</span> plainText<span class="token punctuation">.</span><span class="token function">components</span><span class="token punctuation">(</span>separatedBy<span class="token punctuation">:</span> <span class="token punctuation">.</span>whitespacesAndNewlines<span class="token punctuation">)</span>
           <span class="token punctuation">.</span>map <span class="token punctuation">{</span> word <span class="token keyword">in</span>
               word<span class="token punctuation">.</span><span class="token function">trimmingCharacters</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token class-name">CharacterSet</span><span class="token punctuation">.</span>alphanumerics<span class="token punctuation">.</span>inverted<span class="token punctuation">)</span>
                   <span class="token punctuation">.</span><span class="token function">lowercased</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
           <span class="token punctuation">}</span>
           <span class="token punctuation">.</span>compactMap <span class="token punctuation">{</span> <span class="token short-argument">$0</span><span class="token punctuation">.</span>isEmpty <span class="token operator">?</span> <span class="token nil constant">nil</span> <span class="token punctuation">:</span> <span class="token short-argument">$0</span> <span class="token punctuation">}</span>

       <span class="token keyword">return</span> words<span class="token punctuation">.</span>count
   <span class="token punctuation">}</span>


   <span class="token keyword">enum</span> <span class="token class-name">FileType</span><span class="token punctuation">:</span> <span class="token class-name">CaseIterable</span> <span class="token punctuation">{</span>
       <span class="token keyword">case</span> text
       <span class="token keyword">case</span> markdown

       <span class="token keyword">init</span><span class="token operator">?</span><span class="token punctuation">(</span>filePath<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">guard</span> <span class="token keyword">let</span> type <span class="token operator">=</span> <span class="token class-name">FileType</span><span class="token punctuation">.</span>allCases<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token keyword">where</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
               filePath<span class="token punctuation">.</span><span class="token function">hasSuffix</span><span class="token punctuation">(</span><span class="token short-argument">$0</span><span class="token punctuation">.</span>fileExtension<span class="token punctuation">)</span>
           <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
               <span class="token keyword">return</span> <span class="token nil constant">nil</span>
           <span class="token punctuation">}</span>
           <span class="token keyword">self</span> <span class="token operator">=</span> type
       <span class="token punctuation">}</span>

       <span class="token keyword">var</span> fileExtension<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">{</span>
           <span class="token keyword">switch</span> <span class="token keyword">self</span> <span class="token punctuation">{</span>
           <span class="token keyword">case</span> <span class="token punctuation">.</span>text<span class="token punctuation">:</span>
               <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">".txt"</span></span>
           <span class="token keyword">case</span> <span class="token punctuation">.</span>markdown<span class="token punctuation">:</span>
               <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">".md"</span></span>
           <span class="token punctuation">}</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>

   <span class="token comment">// MARK: - Error</span>

   <span class="token keyword">struct</span> <span class="token class-name">RuntimeError</span><span class="token punctuation">:</span> <span class="token class-name">Error</span><span class="token punctuation">,</span> <span class="token class-name">CustomStringConvertible</span> <span class="token punctuation">{</span>
       <span class="token keyword">var</span> description<span class="token punctuation">:</span> <span class="token class-name">String</span>

       <span class="token keyword">init</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> description<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">self</span><span class="token punctuation">.</span>description <span class="token operator">=</span> description
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Build and run!</p>
<h1 id="toc-section-5"><a href="#how-to-define-multiple-subcommands" aria-hidden="true"><span class="icon icon-link"></span></a>How to define multiple subcommands</h1>
<p>Wouldn‚Äôt it be great if your tool could count the words in your article file as well? You can add this additional functionality if you include a second subcommand called ‚Äî <code class="language-inline-text">word-count</code>. This is what it should look like:</p>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ readometer word-count <span class="token operator">&lt;</span>a <span class="token function">file</span> path<span class="token operator">></span> <span class="token parameter variable">--verbose</span>
Word Count: <span class="token number">2073</span></code></pre></div>
<p>Duplicate the Estimate type implementation and change it to look like this:</p>
<div class="gridsome-highlight" data-language="swift"><pre class="language-swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">WordCount</span><span class="token punctuation">:</span> <span class="token class-name">ParsableCommand</span> <span class="token punctuation">{</span>
   <span class="token attribute atrule">@Argument</span> <span class="token keyword">var</span> filePath<span class="token punctuation">:</span> <span class="token class-name">String</span>
   <span class="token attribute atrule">@Flag</span> <span class="token keyword">var</span> verbose <span class="token operator">=</span> <span class="token boolean">false</span>

   <span class="token keyword">static</span> <span class="token keyword">let</span> configuration <span class="token operator">=</span> <span class="token class-name">CommandConfiguration</span><span class="token punctuation">(</span>abstract<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Word Counter."</span></span><span class="token punctuation">)</span>

   <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token punctuation">{</span>
       <span class="token comment">// Extract only text contents from the file</span>
       <span class="token keyword">let</span> plainText <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token class-name">Readometer</span><span class="token punctuation">.</span><span class="token function">getFileContents</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> filePath<span class="token punctuation">)</span>

       <span class="token keyword">if</span> verbose <span class="token punctuation">{</span>
           <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Calculating word count for '</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token class-name">String</span><span class="token punctuation">(</span>describing<span class="token punctuation">:</span> filePath<span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">'"</span></span><span class="token punctuation">)</span>
       <span class="token punctuation">}</span>

       <span class="token keyword">let</span> wordCount <span class="token operator">=</span> <span class="token class-name">Readometer</span><span class="token punctuation">.</span><span class="token function">wordCount</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> plainText<span class="token punctuation">)</span>

       <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"üéâüéâüéâ\nWord Count: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">wordCount</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">\nüéâüéâüéâ"</span></span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Let‚Äôs change the <code class="language-inline-text">Readometer</code> type's configuration to look like this:</p>
<div class="gridsome-highlight" data-language="swift"><pre class="language-swift"><code class="language-swift"><span class="token keyword">static</span> <span class="token keyword">let</span> configuration <span class="token operator">=</span> <span class="token class-name">CommandConfiguration</span><span class="token punctuation">(</span>
       abstract<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"A Swift command-line tool for estimating the reading time of articles."</span></span><span class="token punctuation">,</span>
       subcommands<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Estimate</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">,</span> <span class="token class-name">WordCount</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       defaultSubcommand<span class="token punctuation">:</span> <span class="token class-name">Estimate</span><span class="token punctuation">.</span><span class="token keyword">self</span>
   <span class="token punctuation">)</span></code></pre></div>
<p>Keep in mind that each subcommand is ultimately independent and can specify a combination of shared and unique arguments. The purpose of duplicating the Estimate type was to demonstrate its nature.</p>
<h1 id="toc-section-6"><a href="#adding-enhancements-to-the-tool" aria-hidden="true"><span class="icon icon-link"></span></a>Adding enhancements to the tool</h1>
<p>There are a few improvements that you can make while keeping usability and convenience in mind as your tool eventually assumes its final form. Let‚Äôs look into these.</p>
<h1 id="toc-section-7"><a href="#named-options" aria-hidden="true"><span class="icon icon-link"></span></a>Named Options</h1>
<p>For the article file path, the tool only needs one argument, and it works just well. However, you can include an additional method for providing input files to improve the clarity of the argument available with the tool. Make the following changes:</p>
<div class="gridsome-highlight" data-language="swift"><pre class="language-swift"><code class="language-swift"><span class="token attribute atrule">@Argument</span> <span class="token keyword">var</span> filePath<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span>
<span class="token attribute atrule">@Option</span> <span class="token keyword">var</span> inputFilePath<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span>
<span class="token attribute atrule">@Flag</span> <span class="token keyword">var</span> verbose <span class="token operator">=</span> <span class="token boolean">false</span></code></pre></div>
<p>The <code class="language-inline-text">@Option</code> property wrapper represents a command-line input that looks like <code class="language-inline-text">--name value></code>, with the name derived from the name of your property. But since the property name is slightly lengthier, you can use the property wrapper to specify a custom shorthand, as illustrated below.</p>
<div class="gridsome-highlight" data-language="swift"><pre class="language-swift"><code class="language-swift"><span class="token attribute atrule">@Option</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">.</span>short<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token function">customLong</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"input"</span></span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> inputFilePath<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span></code></pre></div>
<p>Update the <code class="language-inline-text">run()</code> method in both the subcommand types.</p>
<div class="gridsome-highlight" data-language="swift"><pre class="language-swift"><code class="language-swift"><span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token punctuation">{</span>
    <span class="token comment">// Get the path to the file</span>
    <span class="token keyword">var</span> inputFile<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span> <span class="token operator">=</span> options<span class="token punctuation">.</span>inputFilePath
    <span class="token comment">// if users are familiar with argument, we will make their life easy.</span>
    <span class="token keyword">if</span> <span class="token keyword">let</span> filePath <span class="token operator">=</span> options<span class="token punctuation">.</span>filePath <span class="token punctuation">{</span>
            inputFile <span class="token operator">=</span> filePath
    <span class="token punctuation">}</span>
    <span class="token comment">// Extract only text contents from the file</span>
    <span class="token keyword">let</span> plainText <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token class-name">Readometer</span><span class="token punctuation">.</span><span class="token function">getFileContents</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> inputFile<span class="token punctuation">)</span>

    <span class="token comment">// ..</span>
    <span class="token comment">// ...</span>
    <span class="token comment">// ....</span>
<span class="token punctuation">}</span></code></pre></div>
<p>With this update, you should also be able to do the following:</p>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ readometer estimate <span class="token parameter variable">--input</span> <span class="token operator">&lt;</span>a <span class="token function">file</span> path<span class="token operator">></span> <span class="token parameter variable">--verbose</span>
Estimated reading time: <span class="token number">10</span> minutes</code></pre></div>
<h1 id="toc-section-8"><a href="#optiongroup" aria-hidden="true"><span class="icon icon-link"></span></a>OptionGroup</h1>
<p>If you observe closely, each subcommand specifies its own arguments, but they are identical, implying that it makes more sense for it to be shared among subcommands in this scenario. With the help of <code class="language-inline-text">ParsableArguments</code>, you can achieve this.</p>
<div class="gridsome-highlight" data-language="swift"><pre class="language-swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">Options</span><span class="token punctuation">:</span> <span class="token class-name">ParsableArguments</span> <span class="token punctuation">{</span>
   <span class="token attribute atrule">@Flag</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token punctuation">.</span>shortAndLong<span class="token punctuation">)</span>
   <span class="token keyword">var</span> verbose<span class="token punctuation">:</span> <span class="token class-name">Bool</span> <span class="token operator">=</span> <span class="token boolean">false</span>

   <span class="token attribute atrule">@Argument</span> <span class="token keyword">var</span> filePath<span class="token punctuation">:</span> <span class="token class-name">FilePath</span><span class="token operator">?</span>

   <span class="token attribute atrule">@Option</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">.</span>short<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token function">customLong</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"input"</span></span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token keyword">var</span> inputFilePath<span class="token punctuation">:</span> <span class="token class-name">FilePath</span><span class="token operator">?</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In the above example, I‚Äôve defined a ParsableArguments type with properties that will be shared across multiple subcommands. Types that conform to ParsableArguments can be parsed from command-line arguments, but don‚Äôt provide any execution through a <code class="language-inline-text">run()</code> method.</p>
<p>Replace all the existing properties in your subcommands with following line.</p>
<div class="gridsome-highlight" data-language="swift"><pre class="language-swift"><code class="language-swift"><span class="token attribute atrule">@OptionGroup</span> <span class="token keyword">var</span> options<span class="token punctuation">:</span> <span class="token class-name">Options</span></code></pre></div>
<h1 id="toc-section-9"><a href="#providing-help" aria-hidden="true"><span class="icon icon-link"></span></a>Providing Help</h1>
<p>You may have observed that when the `-h` or `‚Äî help` flags are used, `ArgumentParser` automatically generates help for any command. But they are missing the descriptions. Let‚Äôs add that now by passing string literals as the <code class="language-inline-text">help</code> parameter:</p>
<div class="gridsome-highlight" data-language="swift"><pre class="language-swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">Options</span><span class="token punctuation">:</span> <span class="token class-name">ParsableArguments</span> <span class="token punctuation">{</span>
   <span class="token attribute atrule">@Flag</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token punctuation">.</span>shortAndLong<span class="token punctuation">,</span> help<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Show status updates for debugging purposes."</span></span><span class="token punctuation">)</span>
   <span class="token keyword">var</span> verbose<span class="token punctuation">:</span> <span class="token class-name">Bool</span> <span class="token operator">=</span> <span class="token boolean">false</span>

   <span class="token attribute atrule">@Argument</span><span class="token punctuation">(</span>help<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"The input file path."</span></span><span class="token punctuation">)</span> <span class="token keyword">var</span> filePath<span class="token punctuation">:</span> <span class="token class-name">FilePath</span><span class="token operator">?</span>

   <span class="token attribute atrule">@Option</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">.</span>short<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token function">customLong</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"input"</span></span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> help<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"A path to a file to read."</span></span><span class="token punctuation">)</span>
   <span class="token keyword">var</span> inputFilePath<span class="token punctuation">:</span> <span class="token class-name">FilePath</span><span class="token operator">?</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Give it a try now.</p>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ readometer <span class="token parameter variable">--help</span></code></pre></div>
<h1 id="toc-section-10"><a href="#installing-the-tool" aria-hidden="true"><span class="icon icon-link"></span></a>Installing the tool</h1>
<p>It‚Äôs time to put your tool through its paces and see how it performs.</p>
<figure><img src="/blog/build-your-first-swift-command-line-tool-with-argumentparser/readometer-cli.gif" alt="Demo of Readometer CLI Tool"><figcaption>Demo of Readometer CLI Tool</figcaption></figure>
<p>More than ready to ship, it seems. How do you ship it then?</p>
<p>To use it personally or manually, you‚Äôll need to build it with the release configuration and copy the executable generated in the <code class="language-inline-text">.build/release</code> folder into the <code class="language-inline-text">/usr/local/bin</code> folder.</p>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ swift build <span class="token parameter variable">-c</span> release
$ <span class="token builtin class-name">cd</span> .build/release
$ <span class="token function">cp</span> <span class="token parameter variable">-f</span> Readometer /usr/local/bin/readometer</code></pre></div>
<p>Or, use <a href="https://github.com/yonaskolb/mint" target="_blank" rel="nofollow noopener noreferrer">Mint</a> to install the Package using:</p>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ mint <span class="token function">install</span> ajithrnayak/Readometer</code></pre></div>
<h1 id="toc-section-11"><a href="#thats-all-folks" aria-hidden="true"><span class="icon icon-link"></span></a>That‚Äôs all, folks!</h1>
<p>This was my first Swift Command-Line Tool built using Swift Package Manager(SPM) and ArgumentParser. With these powerful tools, creating command-line tools in Swift is now easier than ever.</p>
<p>If you want to explore the code, you can find the Github repository for the Readometer here: <a href="https://github.com/ajithrnayak/Readometer" target="_blank" rel="nofollow noopener noreferrer">https://github.com/ajithrnayak/Readometer</a>.</p>
<p>I‚Äôm sure you‚Äôll now have a basic understanding of how to create your own Swift command-line tools using ArgumentParser. From here, you can expand upon the functionality of your tool and create more complex tools to boost your development productivity.</p>
<p>Let me know if you have any suggestions. Till the next one! ‚úåÔ∏è</p>
<blockquote>
<p><em>Hi! I‚Äôm</em> <a href="https://ajith.xyz/" target="_blank" rel="nofollow noopener noreferrer"><em>Ajith</em></a><em>, a senior software engineer and wannabe designer based in Bengaluru, India. With nearly a decade of experience in iOS development, I‚Äôm currently building immersive mobile experiences</em> <a href="https://tarkalabs.com/" target="_blank" rel="nofollow noopener noreferrer"><em>@Tarka Labs</em></a><em>.</em></p>
</blockquote>
</div><hr data-v-996dafb6><div class="inner-section" data-v-996dafb6><div class="author-basic-info" data-v-996dafb6><img src="/assets/img/bitman.9f5fc4e7.png" alt="Ajith Renjala" width="64" data-v-996dafb6><div data-v-996dafb6><p class="heading-size-9 capitalize" data-v-996dafb6>Ajith Renjala</p><p class="body-jetbrains-size-10" data-v-996dafb6>
            A tarkan
          </p></div></div><p class="body-opensans-size-9" data-v-996dafb6>He is still thiking what to write about him</p><div class="social-links" data-v-996dafb6><!----><!----><a href="https://medium.com/@ajithrnayak" target="_blank" class="heading-size-9" data-v-996dafb6>
          Medium
        </a></div></div><hr data-v-996dafb6><div class="related-articles" data-v-996dafb6><div class="flex-space-between" data-v-996dafb6><p class="heading-size-7" data-v-996dafb6>_related articles</p><a href="/blogs" class="heading-size-9 underline" data-v-996dafb6>View all</a></div><div class="flex-space-between blog-card-wrapper" data-v-996dafb6><a href="/blogs/smart-contracts-store-information" class="blog-card" data-v-996dafb6><img src="/assets/img/default-cover.55254b66.png" alt="Blockchain FTW" class="thumbnail" data-v-996dafb6><div class="info" data-v-996dafb6><p class="heading-size-10 capitalize" data-v-996dafb6>/web</p><h3 data-v-996dafb6>Blockchain as public ledger</h3><p class="body-jetbrains-size-10" data-v-996dafb6>
              Rahul Nitin Padalkar ¬† 5 min read
            </p></div></a><a href="/blogs/using-tarka-chat-in-your-react-vue-apps" class="blog-card" data-v-996dafb6><img src="/assets/img/Photo-by-Volodymyr-Hryshchenko-on-Unsplash.97698903.webp" alt="Using Tarka Chat in your React/Vue apps" class="thumbnail" data-v-996dafb6><div class="info" data-v-996dafb6><p class="heading-size-10 capitalize" data-v-996dafb6>/web</p><h3 data-v-996dafb6>Using Tarka Chat in your React/Vue apps</h3><p class="body-jetbrains-size-10" data-v-996dafb6>
              Shamil Siddique ¬† 5 min read
            </p></div></a></div></div><div class="lets-talk" data-v-188e6a71><div class="message heading-size-7" data-v-188e6a71>
    Let‚Äôs build digital solutions together.
  </div><div class="action-container" data-v-188e6a71><div class="action-button heading-size-5" data-v-188e6a71><div data-v-188e6a71>Get in touch</div><div class="arrow" data-v-188e6a71>-&gt;</div></div><img src="/assets/img/talk.71d1d2f3.svg" alt="Lenny Face" data-v-188e6a71></div></div></div></div><div data-v-996dafb6></div></div><div id="footer" class="baseLayout" data-v-996dafb6 data-v-b5a9baaa><div data-v-996dafb6></div><div data-v-996dafb6><div class="site-footer" data-v-0a037a4b data-v-b5a9baaa><ul class="main-nav footer" data-v-748716d7 data-v-0a037a4b><div class="primary fadeIn" data-v-748716d7><li data-v-748716d7><a href="/genai" data-v-748716d7>/GenAI</a></li><li data-v-748716d7><a href="https://design.tarkalabs.com/" target="_self" data-v-748716d7>/Design</a></li><li data-v-748716d7><a href="/develop" data-v-748716d7>/Develop</a></li><li data-v-748716d7><a href="/case-studies" data-v-748716d7>
        /Case_Studies
      </a></li><li data-v-748716d7><a href="/careers" data-v-748716d7>/Careers</a></li><li data-v-748716d7><a href="/about" data-v-748716d7>/About</a></li><li data-v-748716d7><a href="/contact" data-v-748716d7>/Contact</a></li></div></ul><div class="subnav" data-v-0a037a4b><ul class="sub body-jetbrains-size-11 footer fadeIn" data-v-3cc3824e data-v-0a037a4b><li data-v-3cc3824e><a href="/blogs" class="active" data-v-3cc3824e>/blogs</a></li><li data-v-3cc3824e><a href="/talks" data-v-3cc3824e>/talks</a></li><li data-v-3cc3824e><a href="/train" data-v-3cc3824e>/train</a></li></ul><div data-v-fae945d8 data-v-0a037a4b><a href="https://twitter.com/tarkalabs" target="_blank" rel="noopener" class="external" data-v-fae945d8>Twitter</a><a href="https://in.linkedin.com/company/tarka-labs" target="_blank" rel="noopener" class="external" data-v-fae945d8>LinkedIn</a></div><div class="sedin" data-v-0a037a4b><a href="https://sedintechnologies.com/" target="_blank" rel="noopener" class="external" data-v-0a037a4b>Tarka Labs is a division of Sedin Technologies</a></div></div></div></div><div data-v-996dafb6></div></div></div></div></div>
    <script src="/assets/js/app.0e5d4a8b.js" defer></script><script src="/assets/js/page--src--templates--blog-vue.2099f288.js" defer></script><script data-vue-tag="ssr" src="https://unpkg.com/@lottiefiles/lottie-player@0.4.0/dist/lottie-player.js" data-body="true"></script>
  </body>
</html>
