<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Debounce in Swift · Tarka Labs - Tarka Labs</title><meta name="gridsome:hash" content="befc11b432811bca2258a5ed9ac12568bf4c1023"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="viewport" content="width=device-width, initial-scale=1.0"><meta data-vue-tag="ssr" property="og:title" content="Debounce in Swift · Tarka Labs"><meta data-vue-tag="ssr" property="og:description" content="All about debounce: 4 ways to achieve debounce in Swift"><meta data-vue-tag="ssr" property="og:image" content="/assets/img/default-cover.55254b66.png"><meta data-vue-tag="ssr" property="og:image:height" content="627"><meta data-vue-tag="ssr" property="og:image:width" content="1200"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.92f6d0f06feb6aec5e019521ff224fd8.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.92f6d0f06feb6aec5e019521ff224fd8.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.92f6d0f06feb6aec5e019521ff224fd8.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.92f6d0f06feb6aec5e019521ff224fd8.png"><link rel="preload" href="/assets/css/0.styles.2c02ec4b.css" as="style"><link rel="preload" href="/assets/js/app.0797a3da.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--blog-vue.80bca3bd.js" as="script"><link rel="stylesheet" href="/assets/css/0.styles.2c02ec4b.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
    <meta
      name="google-site-verification"
      content="j7cLUK-kxGEpMOY7valSkamH4kQe_l38yMMAXbpk19U"
    />
    <noscript>
      <div class="noscript-container">
        <a href="/" class="noscript-logo">Tarka <br />_Labs</a>
        <div class="noscript-text-container">
          <h1>Uh oh! Looks like <span>JavaScript</span> is disabled.</h1>
          <p>
            Bitman requires <span>JavaScript</span> to fuel his thirst to end
            bad UX and lazy design, which is necessary to give you the best
            viewing experience possible. Please enable it to continue to our
            website.
          </p>
        </div>
      </div>
    </noscript>
  </head>

  <body >
    <div><div id="app" data-server-rendered="true" data-v-b5a9baaa><div data-v-b5a9baaa><div id="banner-section" data-v-b5a9baaa><div class="banner" style="background:;display:none;" data-v-b5a9baaa><div class="layout" data-v-b5a9baaa><div data-v-b5a9baaa></div><div class="hero heading-size-5" style="color:#ffffff;" data-v-b5a9baaa></div><div data-v-b5a9baaa></div></div></div><div data-v-b5a9baaa></div></div><div class="sidebar" data-v-d6d2017e data-v-b5a9baaa><div class="nav" data-v-d6d2017e><div class="fixed" data-v-d6d2017e><a href="/" data-v-9b1a4c9c data-v-d6d2017e> TARKA<br data-v-9b1a4c9c>_LABS </a><div class="menu" data-v-50705736 data-v-d6d2017e><div class="control" style="stroke:black;" data-v-50705736><div class="spinner heading-size-9" data-v-02ea7230 data-v-50705736><span class="side-menu-symbol" data-v-02ea7230><span class="menu-symbol rotate180t90" data-v-02ea7230><svg height="10" width="10" data-v-02ea7230><line x1="0" y1="5" x2="10" y2="5" style="stroke-width: 2" data-v-02ea7230></line></svg></span><span class="menu-symbol rotate90t0" data-v-02ea7230><svg height="10" width="10" data-v-02ea7230><line x1="0" y1="5" x2="10" y2="5" style="stroke-width: 2" data-v-02ea7230></line></svg></span></span><span style="vertical-align: middle" data-v-02ea7230> menu </span></div><div class="active-page body-jetbrains-size-11 fade-in" data-v-128e5feb data-v-50705736>
  
</div></div><div class="items hidden" data-v-50705736><ul class="main-nav" data-v-244aa462 data-v-50705736><div class="primary fadeOut sidebar" data-v-244aa462><li data-v-244aa462><a href="/music-biz" data-v-244aa462>/MusicBiz</a></li><li data-v-244aa462><a href="/genai" data-v-244aa462>/GenAI</a></li><li data-v-244aa462><a href="https://solutions.tarkalabs.com/design/" target="_self" data-v-244aa462>/Design</a></li><li data-v-244aa462><a href="/develop" data-v-244aa462>/Develop</a></li><li data-v-244aa462><a href="/case-studies" data-v-244aa462>
        /Case_Studies
      </a></li><li data-v-244aa462><a href="/careers" data-v-244aa462>/Careers</a></li><li data-v-244aa462><a href="/about" data-v-244aa462>/About</a></li><li data-v-244aa462><a href="/contact" data-v-244aa462>/Contact</a></li></div></ul><ul class="sub body-jetbrains-size-11 fadeOut sidebar" data-v-3cc3824e data-v-50705736><li data-v-3cc3824e><a href="/blogs" class="active" data-v-3cc3824e>/blogs</a></li><li data-v-3cc3824e><a href="/talks" data-v-3cc3824e>/talks</a></li><li data-v-3cc3824e><a href="/train" data-v-3cc3824e>/train</a></li></ul></div></div><a href="/contact" class="heading-size-9" data-v-573e12d8 data-v-d6d2017e>
  Get in<br data-v-573e12d8>touch<span class="arrow" data-v-573e12d8>-&gt;</span></a></div></div><!----></div><div class="baseLayout" data-v-996dafb6 data-v-b5a9baaa><div data-v-996dafb6></div><div data-v-996dafb6><div class="blog-details-page" data-v-996dafb6><div class="inner-section" data-v-996dafb6><p class="heading-size-10 capitalize" data-v-996dafb6>
        /mobile - 5 min read
      </p><h1 class="title" data-v-996dafb6>Debounce in Swift</h1><div class="author-basic-info" data-v-996dafb6><img src="/assets/img/pavan.76fd8644.jpg" alt="Pavan Kumar C" width="64" data-v-996dafb6><div data-v-996dafb6><p class="heading-size-9 capitalize" data-v-996dafb6>Pavan Kumar C</p><p class="body-jetbrains-size-10" data-v-996dafb6>
            iOS Developer
          </p></div></div></div><img src="/assets/img/default-cover.55254b66.png" alt="A representation of a function called 'debounce' which is accepting, as input, a green circle labelled '3' and outputting an identical-looking green circle with no label" class="header-img" data-v-996dafb6><div class="toc-wrapper" data-v-996dafb6><h2 class="heading-size-7" data-v-996dafb6>Table of contents</h2><div class="toc" data-v-996dafb6><a href="#content" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/01</p><p data-v-996dafb6>Intro</p></a><a href="#toc-section-1" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/02</p><p data-v-996dafb6>Timer</p></a><a href="#toc-section-2" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/03</p><p data-v-996dafb6>DispatchWorkItem</p></a><a href="#toc-section-3" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/04</p><p data-v-996dafb6>RxSwift</p></a><a href="#toc-section-4" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/05</p><p data-v-996dafb6>Combine</p></a><a href="#toc-section-5" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/06</p><p data-v-996dafb6>Conclusion</p></a></div></div><div id="content" class="content" data-v-996dafb6><p>Often times we come to a situation where we have to search 100 000+ records from local database (coredata or realm) or from a file or a plist etc.</p>
<p>And when user starts to search, each key press will make the call to method that queries this large data resulting in unresponsive app.</p>
<p>One way to optimise this will be implementing debounce.</p>
<img src="/blog/debounce-in-swift/debounce-timeline.png">
<h2 id="what-is-debounce"><a href="#what-is-debounce" aria-hidden="true"><span class="icon icon-link"></span></a>What is debounce?</h2>
<p>Its a function which forces the execution to wait a certain amount of time before running again.</p>
<p>We have 4(may be more) ways to achieve debounce in Swift</p>
<h1 id="toc-section-1"><a href="#timer" aria-hidden="true"><span class="icon icon-link"></span></a>Timer</h1>
<p>Timers are a great way to run code on a repeating basis, and iOS has the <code class="language-inline-text">Timer</code> class to handle it.</p>
<div class="gridsome-code-title"><span>TimerDebounce.swift</span></div><div class="gridsome-highlight" data-language="swift"><pre class="language-swift"><code class="language-swift"><span class="token keyword">var</span> searchTimer<span class="token punctuation">:</span> <span class="token class-name">Timer</span><span class="token operator">?</span>

<span class="token keyword">func</span> <span class="token function-definition function">updateSearchResults</span><span class="token punctuation">(</span><span class="token keyword">for</span> searchController<span class="token punctuation">:</span> <span class="token class-name">UISearchController</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token comment">//Invalidate and Reinitialise</span>
  <span class="token keyword">self</span><span class="token punctuation">.</span>searchTimer<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">guard</span> <span class="token keyword">let</span> searchText <span class="token operator">=</span> searchController<span class="token punctuation">.</span>searchBar<span class="token punctuation">.</span>text <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">}</span>

  searchTimer <span class="token operator">=</span> <span class="token class-name">Timer</span><span class="token punctuation">.</span><span class="token function">scheduledTimer</span><span class="token punctuation">(</span>withTimeInterval<span class="token punctuation">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span> repeats<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> block<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token keyword">weak</span> <span class="token keyword">self</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token keyword">in</span>
    <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span><span class="token function">global</span><span class="token punctuation">(</span>qos<span class="token punctuation">:</span> <span class="token punctuation">.</span>userInteractive<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token keyword">weak</span> <span class="token keyword">self</span><span class="token punctuation">]</span> <span class="token keyword">in</span>
      <span class="token comment">//Use search text and perform the query</span>
      <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span>
        <span class="token comment">//Update UI</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-inline-text">updateSearchResults</code> is the UISearchController delegate method which gets called on each key press.</p>
<p><code class="language-inline-text">searchTimer</code> is an instance variable to store the <code class="language-inline-text">Timer</code>, Timer is scheduled to execute the closure for 0.5s but if the method gets called before that, then the timer is invalidated and reinitialised.</p>
<h1 id="toc-section-2"><a href="#dispatchworkitem" aria-hidden="true"><span class="icon icon-link"></span></a>DispatchWorkItem</h1>
<p>A <code class="language-inline-text">DispatchWorkItem</code> encapsulates work to be performed on a dispatch queue or within a dispatch group.</p>
<div class="gridsome-code-title"><span>DispatchWorkItemDebounce.swift</span></div><div class="gridsome-highlight" data-language="swift"><pre class="language-swift"><code class="language-swift"><span class="token keyword">var</span> searchTask<span class="token punctuation">:</span> <span class="token class-name">DispatchWorkItem</span><span class="token operator">?</span>

<span class="token comment">//SearchController delegate method</span>
<span class="token keyword">func</span> <span class="token function-definition function">updateSearchResults</span><span class="token punctuation">(</span><span class="token keyword">for</span> searchController<span class="token punctuation">:</span> <span class="token class-name">UISearchController</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">guard</span> <span class="token keyword">let</span> searchText <span class="token operator">=</span> searchController<span class="token punctuation">.</span>searchBar<span class="token punctuation">.</span>text <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">}</span>

  <span class="token comment">//Invalidate and reinitiate</span>
  <span class="token keyword">self</span><span class="token punctuation">.</span>searchTask<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">let</span> task <span class="token operator">=</span> <span class="token class-name">DispatchWorkItem</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token keyword">weak</span> <span class="token keyword">self</span><span class="token punctuation">]</span> <span class="token keyword">in</span>
    <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span><span class="token function">global</span><span class="token punctuation">(</span>qos<span class="token punctuation">:</span> <span class="token punctuation">.</span>userInteractive<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token keyword">weak</span> <span class="token keyword">self</span><span class="token punctuation">]</span> <span class="token keyword">in</span>
      <span class="token comment">//Use search text and perform the query</span>
      <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span>
        <span class="token comment">//Update UI</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">self</span><span class="token punctuation">.</span>searchTask <span class="token operator">=</span> task

  <span class="token comment">//0.5 is the wait or idle time for execution of the function applyFilter</span>
  <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token function">asyncAfter</span><span class="token punctuation">(</span>deadline<span class="token punctuation">:</span> <span class="token class-name">DispatchTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">,</span> execute<span class="token punctuation">:</span> task<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-inline-text">updateSearchResults</code> is the UISearchController delegate method which gets called on each key press.</p>
<p><code class="language-inline-text">searchTask</code> has the property to store <code class="language-inline-text">DispatchWorkItem</code>. DispatchQueue executes the DispatchWorkItem closure after the deadline time 0.5s and if the method gets called before the deadline then the searchTask is invalidated and reinitialised.</p>
<h1 id="toc-section-3"><a href="#rxswift" aria-hidden="true"><span class="icon icon-link"></span></a>RxSwift</h1>
<p><code class="language-inline-text">RxSwift</code> is a framework for interacting with the Swift programming language, while <code class="language-inline-text">RxCocoa</code> is a framework that makes Cocoa APIs used in iOS, easier to use with reactive techniques.</p>
<p>First you will have to add RxSwift and RxCocoa to the project. You could use Cocoapods or Carthage or Swift Package Manager to add these dependencies</p>
<div class="gridsome-code-title"><span>RxSwiftDebounce.swift</span></div><div class="gridsome-highlight" data-language="swift"><pre class="language-swift"><code class="language-swift"><span class="token comment">//Import Rx dependencies</span>
<span class="token keyword">import</span> <span class="token class-name">RxSwift</span>
<span class="token keyword">import</span> <span class="token class-name">RxCocoa</span>

<span class="token comment">//holds all the disposables</span>
<span class="token keyword">let</span> disposeBag <span class="token operator">=</span> <span class="token class-name">DisposeBag</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">applyRxSwiftSearch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//Initialise the publisher and subscriber for search</span>
<span class="token keyword">func</span> <span class="token function-definition function">applyRxSwiftSearch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  searchController<span class="token punctuation">.</span>searchBar
    <span class="token punctuation">.</span>rx<span class="token punctuation">.</span>text
    <span class="token punctuation">.</span><span class="token function">debounce</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">milliseconds</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">,</span> scheduler<span class="token punctuation">:</span> <span class="token class-name">MainScheduler</span><span class="token punctuation">.</span>instance<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>onNext<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token keyword">unowned</span> <span class="token keyword">self</span><span class="token punctuation">]</span> query <span class="token keyword">in</span>
      <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span><span class="token function">global</span><span class="token punctuation">(</span>qos<span class="token punctuation">:</span> <span class="token punctuation">.</span>userInteractive<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token keyword">weak</span> <span class="token keyword">self</span><span class="token punctuation">]</span> <span class="token keyword">in</span>
        <span class="token comment">//Use search text and perform the query</span>
        <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span>
          <span class="token comment">//Update UI</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">disposed</span><span class="token punctuation">(</span>by<span class="token punctuation">:</span> disposeBag<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Disposebag is used for memory management and it holds all the disposables and allows us not to have to dispose of each subscription individually</p>
<p>searchBar is wrapped to Rx and is subscribed to search text changes.</p>
<p>debounce() listens to user events and publishes if there is a delay of 0.5s in user activity.</p>
<p>Subscriber receives the event of the search text which then is queried against the actual records.</p>
<p>DisposeBag collects all the disposables.</p>
<h1 id="toc-section-4"><a href="#combine" aria-hidden="true"><span class="icon icon-link"></span></a>Combine</h1>
<p><code class="language-inline-text">Combine</code> is Apple’s new reactive framework for handling events over time. Combine Framework is Natively supported from iOS 13 and Swift 5 onwards.</p>
<p>First you will have to import Combine Framework.</p>
<div class="gridsome-code-title"><span>CombineDebounce.swift</span></div><div class="gridsome-highlight" data-language="swift"><pre class="language-swift"><code class="language-swift"><span class="token comment">//Import Framework</span>
<span class="token keyword">import</span> <span class="token class-name">Combine</span>

<span class="token comment">//holds all the cancellables</span>
<span class="token keyword">var</span> cancellable <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">AnyCancellable</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">applyCombineSearch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//Initialise the publisher and subscriber for search</span>
<span class="token keyword">func</span> <span class="token function-definition function">applyCombineSearch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> publisher <span class="token operator">=</span> <span class="token class-name">NotificationCenter</span><span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">.</span><span class="token function">publisher</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token class-name">UISearchTextField</span><span class="token punctuation">.</span>textDidChangeNotification<span class="token punctuation">,</span> object<span class="token punctuation">:</span> searchController<span class="token punctuation">.</span>searchBar<span class="token punctuation">.</span>searchTextField<span class="token punctuation">)</span>
  publisher
    <span class="token punctuation">.</span>map <span class="token punctuation">{</span>
      <span class="token punctuation">(</span><span class="token short-argument">$0</span><span class="token punctuation">.</span>object <span class="token keyword">as</span><span class="token operator">!</span> <span class="token class-name">UISearchTextField</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
  <span class="token punctuation">}</span>
  <span class="token punctuation">.</span><span class="token function">debounce</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token function">milliseconds</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">,</span> scheduler<span class="token punctuation">:</span> <span class="token class-name">RunLoop</span><span class="token punctuation">.</span>main<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">sink</span><span class="token punctuation">(</span>receiveValue<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token keyword">in</span>
    <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span><span class="token function">global</span><span class="token punctuation">(</span>qos<span class="token punctuation">:</span> <span class="token punctuation">.</span>userInteractive<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token keyword">weak</span> <span class="token keyword">self</span><span class="token punctuation">]</span> <span class="token keyword">in</span>
      <span class="token comment">//Use search text and perform the query</span>
      <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span>
        <span class="token comment">//Update UI</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">store</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span>cancellable<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Cancellable is a protocol indicating that an activity or action supports cancellation. It frees up any allocated resources. It also stops side effects such as timers, network access, or disk I/O.</p>
<p>Publisher publishes the events whenever there is a change in the text in searchBar.</p>
<p>debounce() listens to user events and publishes if there is a delay of 0.5s in user activity.</p>
<p>sink() collects all the cancellable activities.</p>
<h1 id="toc-section-5"><a href="#conclusion" aria-hidden="true"><span class="icon icon-link"></span></a>Conclusion</h1>
<p>The query happens only if the user activity is idle for 0.5s while entering the search text, in this way we would be limiting a lot of redundant queries which results in app being responsive.</p>
<p>Now we are left with a question. Which one to choose?</p>
<p>In my opinion, if you are using RxSwift or Combine in your projects then you already know what you should go for and if you aren’t then using RxSwift or Combine to achieve debounce is bit overkill, in which case you could achieve using Timer or DispatchWorkItem.</p>
<p>Please find the sample solution here:
<a href="https://github.com/pavankumarchalla/ResponsiveSearch?source=post_page-----e8f8ce22f544--------------------------------" target="_blank" rel="nofollow noopener noreferrer">Github</a></p>
<p>Thanks for reading. Happy coding.</p>
</div><hr data-v-996dafb6><div class="inner-section" data-v-996dafb6><div class="author-basic-info" data-v-996dafb6><img src="/assets/img/pavan.76fd8644.jpg" alt="Pavan Kumar C" width="64" data-v-996dafb6><div data-v-996dafb6><p class="heading-size-9 capitalize" data-v-996dafb6>Pavan Kumar C</p><p class="body-jetbrains-size-10" data-v-996dafb6>
            iOS Developer
          </p></div></div><p class="body-opensans-size-9" data-v-996dafb6>He is still thinking what to write about him</p><div class="social-links" data-v-996dafb6><!----><!----><a href="https://pavankumarchalla.medium.com/" target="_blank" class="heading-size-9" data-v-996dafb6>
          Medium
        </a></div></div><hr data-v-996dafb6><div class="related-articles" data-v-996dafb6><div class="flex-space-between" data-v-996dafb6><p class="heading-size-7" data-v-996dafb6>_related articles</p><a href="/blogs" class="heading-size-9 underline" data-v-996dafb6>View all</a></div><div class="flex-space-between blog-card-wrapper" data-v-996dafb6><a href="/blogs/essential-tools-and-tips-for-every-ios-developer" class="blog-card" data-v-996dafb6><img src="/assets/img/Recommended-tools-tips-for-iOS-developers.3c07d675.png" alt="5 essential tools and tips for every iOS developer" class="thumbnail" data-v-996dafb6><div class="info" data-v-996dafb6><p class="heading-size-10 capitalize" data-v-996dafb6>/mobile</p><h3 data-v-996dafb6>5 essential tools and tips for every iOS developer</h3><p class="body-jetbrains-size-10" data-v-996dafb6>
              Ibrahim Hassan   4 min read
            </p></div></a><a href="/blogs/vpn-detection-guide-ios-android" class="blog-card" data-v-996dafb6><img src="/assets/img/the-ultimate-vpn.c7ce15c6.webp" alt="The ultimate VPN detection guide for iOS and Android" class="thumbnail" data-v-996dafb6><div class="info" data-v-996dafb6><p class="heading-size-10 capitalize" data-v-996dafb6>/mobile</p><h3 data-v-996dafb6>The ultimate VPN detection guide for iOS and Android</h3><p class="body-jetbrains-size-10" data-v-996dafb6>
              Ibrahim Hassan   3 min read
            </p></div></a></div></div><div class="lets-talk" data-v-188e6a71><div class="message heading-size-7" data-v-188e6a71>
    Let’s build digital solutions together.
  </div><div class="action-container" data-v-188e6a71><div class="action-button heading-size-5" data-v-188e6a71><div data-v-188e6a71>Get in touch</div><div class="arrow" data-v-188e6a71>-&gt;</div></div><img src="/assets/img/talk.71d1d2f3.svg" alt="Lenny Face" data-v-188e6a71></div></div></div></div><div data-v-996dafb6></div></div><div id="footer" class="baseLayout" data-v-996dafb6 data-v-b5a9baaa><div data-v-996dafb6></div><div data-v-996dafb6><div class="site-footer" data-v-0a037a4b data-v-b5a9baaa><ul class="main-nav footer" data-v-244aa462 data-v-0a037a4b><div class="primary fadeIn" data-v-244aa462><li data-v-244aa462><a href="/music-biz" data-v-244aa462>/MusicBiz</a></li><li data-v-244aa462><a href="/genai" data-v-244aa462>/GenAI</a></li><li data-v-244aa462><a href="https://solutions.tarkalabs.com/design/" target="_self" data-v-244aa462>/Design</a></li><li data-v-244aa462><a href="/develop" data-v-244aa462>/Develop</a></li><li data-v-244aa462><a href="/case-studies" data-v-244aa462>
        /Case_Studies
      </a></li><li data-v-244aa462><a href="/careers" data-v-244aa462>/Careers</a></li><li data-v-244aa462><a href="/about" data-v-244aa462>/About</a></li><li data-v-244aa462><a href="/contact" data-v-244aa462>/Contact</a></li></div></ul><div class="subnav" data-v-0a037a4b><ul class="sub body-jetbrains-size-11 footer fadeIn" data-v-3cc3824e data-v-0a037a4b><li data-v-3cc3824e><a href="/blogs" class="active" data-v-3cc3824e>/blogs</a></li><li data-v-3cc3824e><a href="/talks" data-v-3cc3824e>/talks</a></li><li data-v-3cc3824e><a href="/train" data-v-3cc3824e>/train</a></li></ul><div data-v-fae945d8 data-v-0a037a4b><a href="https://twitter.com/tarkalabs" target="_blank" rel="noopener" class="external" data-v-fae945d8>Twitter</a><a href="https://in.linkedin.com/company/tarka-labs" target="_blank" rel="noopener" class="external" data-v-fae945d8>LinkedIn</a></div><div class="sedin" data-v-0a037a4b><a href="https://sedintechnologies.com/" target="_blank" rel="noopener" class="external" data-v-0a037a4b>Tarka Labs is a division of Sedin Technologies</a></div></div></div></div><div data-v-996dafb6></div></div></div></div></div>
    <script src="/assets/js/app.0797a3da.js" defer></script><script src="/assets/js/page--src--templates--blog-vue.80bca3bd.js" defer></script><script data-vue-tag="ssr" src="https://unpkg.com/@lottiefiles/lottie-player@0.4.0/dist/lottie-player.js" data-body="true"></script>
  </body>
</html>
