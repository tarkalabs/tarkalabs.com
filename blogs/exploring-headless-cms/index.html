<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Exploring Headless CMS · Tarka Labs - Tarka Labs</title><meta name="gridsome:hash" content="4e835d287785e482d873833e927668661a23737e"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="viewport" content="width=device-width, initial-scale=1.0"><meta data-vue-tag="ssr" property="og:title" content="Exploring Headless CMS · Tarka Labs"><meta data-vue-tag="ssr" property="og:description" content="Exploring Headless CMS"><meta data-vue-tag="ssr" property="og:image" content="/assets/img/exploring-headless-cms.d2aa13f7.webp"><meta data-vue-tag="ssr" property="og:image:height" content="627"><meta data-vue-tag="ssr" property="og:image:width" content="1200"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.92f6d0f06feb6aec5e019521ff224fd8.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.92f6d0f06feb6aec5e019521ff224fd8.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.92f6d0f06feb6aec5e019521ff224fd8.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.92f6d0f06feb6aec5e019521ff224fd8.png"><link rel="preload" href="/assets/css/0.styles.caf054be.css" as="style"><link rel="preload" href="/assets/js/app.5549cb77.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--blog-vue.18adb478.js" as="script"><link rel="stylesheet" href="/assets/css/0.styles.caf054be.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
    <meta
      name="google-site-verification"
      content="j7cLUK-kxGEpMOY7valSkamH4kQe_l38yMMAXbpk19U"
    />
    <noscript>
      <div class="noscript-container">
        <a href="/" class="noscript-logo">Tarka <br />_Labs</a>
        <div class="noscript-text-container">
          <h1>Uh oh! Looks like <span>JavaScript</span> is disabled.</h1>
          <p>
            Bitman requires <span>JavaScript</span> to fuel his thirst to end
            bad UX and lazy design, which is necessary to give you the best
            viewing experience possible. Please enable it to continue to our
            website.
          </p>
        </div>
      </div>
    </noscript>
  </head>

  <body >
    <div><div id="app" data-server-rendered="true" data-v-71a2ecff><div data-v-71a2ecff><div id="banner-section" data-v-71a2ecff><div class="banner" style="background:;display:none;" data-v-71a2ecff><div class="layout" data-v-71a2ecff><div data-v-71a2ecff></div><div class="hero heading-size-5" style="color:#ffffff;" data-v-71a2ecff></div><div data-v-71a2ecff></div></div></div><div data-v-71a2ecff></div></div><div class="sidebar" data-v-d6d2017e data-v-71a2ecff><div class="nav" data-v-d6d2017e><div class="fixed" data-v-d6d2017e><a href="/" data-v-9b1a4c9c data-v-d6d2017e> TARKA<br data-v-9b1a4c9c>_LABS </a><div class="menu" data-v-50705736 data-v-d6d2017e><div class="control" style="stroke:black;" data-v-50705736><div class="spinner heading-size-9" data-v-02ea7230 data-v-50705736><span class="side-menu-symbol" data-v-02ea7230><span class="menu-symbol rotate180t90" data-v-02ea7230><svg height="10" width="10" data-v-02ea7230><line x1="0" y1="5" x2="10" y2="5" style="stroke-width: 2" data-v-02ea7230></line></svg></span><span class="menu-symbol rotate90t0" data-v-02ea7230><svg height="10" width="10" data-v-02ea7230><line x1="0" y1="5" x2="10" y2="5" style="stroke-width: 2" data-v-02ea7230></line></svg></span></span><span style="vertical-align: middle" data-v-02ea7230> menu </span></div><div class="active-page body-jetbrains-size-11 fade-in" data-v-128e5feb data-v-50705736>
  
</div></div><div class="items hidden" data-v-50705736><ul class="main-nav" data-v-1c6945ef data-v-50705736><div class="primary fadeOut sidebar" data-v-1c6945ef><li data-v-1c6945ef><a href="/music-tech" data-v-1c6945ef>/MusicTech</a></li><li data-v-1c6945ef><a href="/health-care-tech" data-v-1c6945ef>/HealthCareTech</a></li><li data-v-1c6945ef><a href="/genai" data-v-1c6945ef>/GenAI</a></li><li data-v-1c6945ef><a href="https://solutions.tarkalabs.com/design/" target="_self" data-v-1c6945ef>/Design</a></li><li data-v-1c6945ef><a href="/develop" data-v-1c6945ef>/Develop</a></li><li data-v-1c6945ef><a href="/case-studies" data-v-1c6945ef>
        /Case_Studies
      </a></li><li data-v-1c6945ef><a href="/careers" data-v-1c6945ef>/Careers</a></li><li data-v-1c6945ef><a href="/about" data-v-1c6945ef>/About</a></li><li data-v-1c6945ef><a href="/contact" data-v-1c6945ef>/Contact</a></li></div></ul><ul class="sub body-jetbrains-size-11 fadeOut sidebar" data-v-3cc3824e data-v-50705736><li data-v-3cc3824e><a href="/blogs" class="active" data-v-3cc3824e>/blogs</a></li><li data-v-3cc3824e><a href="/talks" data-v-3cc3824e>/talks</a></li><li data-v-3cc3824e><a href="/train" data-v-3cc3824e>/train</a></li></ul></div></div><a href="/contact" class="heading-size-9" data-v-573e12d8 data-v-d6d2017e>
  Get in<br data-v-573e12d8>touch<span class="arrow" data-v-573e12d8>-&gt;</span></a></div></div><!----></div><div class="baseLayout" data-v-996dafb6 data-v-71a2ecff><div data-v-996dafb6></div><div data-v-996dafb6><div class="blog-details-page" data-v-996dafb6><div class="inner-section" data-v-996dafb6><p class="heading-size-10 capitalize" data-v-996dafb6>
        /web - 9 min read
      </p><h1 class="title" data-v-996dafb6>Exploring Headless CMS</h1><div class="author-basic-info" data-v-996dafb6><img src="/assets/img/jahangir.a85718b1.jpeg" alt="Jahangir Anwari" width="64" data-v-996dafb6><div data-v-996dafb6><p class="heading-size-9 capitalize" data-v-996dafb6>Jahangir Anwari</p><p class="body-jetbrains-size-10" data-v-996dafb6>
            Developer
          </p></div></div></div><img src="/assets/img/exploring-headless-cms.d2aa13f7.webp" alt="Exploring Headless CMS" class="header-img" data-v-996dafb6><div class="toc-wrapper" data-v-996dafb6><h2 class="heading-size-7" data-v-996dafb6>Table of contents</h2><div class="toc" data-v-996dafb6><a href="#content" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/01</p><p data-v-996dafb6>Intro</p></a><a href="#toc-section-1" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/02</p><p data-v-996dafb6>Why use a “Headless” CMS?</p></a><a href="#toc-section-2" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/03</p><p data-v-996dafb6>Minimum Viable Product (MVP)</p></a><a href="#toc-section-3" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/04</p><p data-v-996dafb6>Strapi</p></a><a href="#toc-section-4" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/05</p><p data-v-996dafb6>Sanity</p></a><a href="#toc-section-5" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/06</p><p data-v-996dafb6>Contentful</p></a><a href="#toc-section-6" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/07</p><p data-v-996dafb6>Conclusion</p></a></div></div><div id="content" class="content" data-v-996dafb6><p>For the while now I have heard rumblings of <a href="https://jamstack.org/" target="_blank" rel="nofollow noopener noreferrer">Jamstack</a> and in particular the buzz around the world of headless CMS (Content Management System) so I decide to take a dive and explore what the hype is all about.</p>
<h2 id="jamstack-whats-that"><a href="#jamstack-whats-that" aria-hidden="true"><span class="icon icon-link"></span></a>Jamstack… what’s that?</h2>
<p>Jamstack is a software architecture based on three building blocks; <em>client-side</em> JavaScript, <em>reusable</em> API and <em>prebuilt</em> Markup. The underlying principle of Jamstack is to deliver your application as flat HTML as quickly as possible and achieve dynamic behaviour by calling various self-owned and third-party APIs. Headless CMS is one of the popular Jamstack approaches.</p>
<h2 id="what-is-a-headless-cms"><a href="#what-is-a-headless-cms" aria-hidden="true"><span class="icon icon-link"></span></a>What is a Headless CMS?</h2>
<p>Before diving in, it would be good to understand what really is a headless CMS. Here’s a definition found on <a href="https://en.wikipedia.org/wiki/Headless_content_management_system" target="_blank" rel="nofollow noopener noreferrer">Wikipedia</a>:</p>
<blockquote>
<p>A headless CMS is a <strong>back-end only</strong> content management system (CMS) built from the ground up as a <strong>content repository</strong> that makes content <strong>accessible via an API</strong> for display on any device.</p>
</blockquote>
<p>The three key points in the above definition are:</p>
<ul>
<li>back-end only</li>
<li>content repository</li>
<li>accessible via API</li>
</ul>
<p>Therefore, when working with a headless CMS we are focusing primarily on the content storage and retrieval and NOT the presentation of content. In other words, a headless CMS provides you with tools to manage content and an API to pull the content.</p>
<h1 id="toc-section-1"><a href="#why-use-a-headless-cms" aria-hidden="true"><span class="icon icon-link"></span></a>Why use a “Headless” CMS?</h1>
<p>Before the smartphone revolution (circa 2007) content on the internet was primarily consumed using a browser. During those times a <em>traditional</em> CMS would consist a whole package that would include:</p>
<ul>
<li><strong>Backend</strong>: Database, Admin interface, Plugins</li>
<li><strong>Frontend</strong>: Templating engine, Views layer</li>
</ul>
<p>As technology evolved over the past decade consumption of digital content expanded to multiple viewports and devices like smartphones, tablets, smartwatches, etc. Although <em>traditional</em> CMS use of responsive design would accommodate different viewports it would fail for devices that are consuming content outside the realm of a browser. This is where headless CMS shines as it inherently separates the data layer from the presentation layer, it provides an API to pull content and delegates the concern of presentation to the frontend application.</p>
<h1 id="toc-section-2"><a href="#minimum-viable-product-mvp" aria-hidden="true"><span class="icon icon-link"></span></a>Minimum Viable Product (MVP)</h1>
<p>To facilitate the exploration I set myself a goal to build the backend for news publishing website. The MVP should includes the following features:</p>
<ol>
<li>Post story articles with image</li>
<li>For the home page provide the editor the ability to select from three layout variations for “Top Stories” section:</li>
</ol>
<ul>
<li>One large top story</li>
<li>Two top stories</li>
<li>Three top stories</li>
</ul>
<p>Here’s a visual representation of the above home page layout options</p>
<img src="/blog/exploring-headless-cms/1.webp">
<h2 id="the-solutions"><a href="#the-solutions" aria-hidden="true"><span class="icon icon-link"></span></a>The Solutions</h2>
<p>Although the ecosystem of <a href="https://jamstack.org/headless-cms/" target="_blank" rel="nofollow noopener noreferrer">headless CMS</a> has a plethora of choices available, in the interest of time I decided to look at the following three solutions:</p>
<ul>
<li><a href="https://strapi.io" target="_blank" rel="nofollow noopener noreferrer">Strapi</a></li>
<li><a href="https://www.sanity.io/" target="_blank" rel="nofollow noopener noreferrer">Sanity</a></li>
<li><a href="https://www.contentful.com" target="_blank" rel="nofollow noopener noreferrer">Contentful</a></li>
</ul>
<h1 id="toc-section-3"><a href="#strapi" aria-hidden="true"><span class="icon icon-link"></span></a>Strapi</h1>
<p><a href="https://strapi.io" target="_blank" rel="nofollow noopener noreferrer">Strapi</a> is one of the most popular open source headless CMS. When compared to the other two headless CMSes (Sanity and Contentful) it gives you <em>complete control</em> over the backend storage and admin interface used.</p>
<p><strong>Setup</strong>
Below is how we would quickly setup a Strapi project along with GraphQL plugin using <a href="https://strapi.io/documentation/developer-docs/latest/installation/cli.html" target="_blank" rel="nofollow noopener noreferrer">command line</a>.</p>
<div class="gridsome-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ npx create-strapi-app strapi-publishing --quickstart
$ strapi install graphql</code></pre></div>
<p>Next we need to create an admin user by accessing: <a href="http://localhost:1337/admin" target="_blank" rel="nofollow noopener noreferrer">http://localhost:1337/admin</a>.</p>
<p><strong>Content Modeling</strong></p>
<p>Strapi has rich constructs to model entities in your system. There are two <strong>types</strong> of models:</p>
<ol>
<li>Content Types: Traditional models that represent an entities in your system like post, tags, etc..</li>
<li>Components: Represents a custom collection of information (e.g. card component containing an image, title and summary fields).</li>
</ol>
<p>The “Content Types” model are further categorized into two <strong>kinds</strong>:</p>
<ol>
<li>Collection Type: Allows multiple instances of the type (e.g. post).</li>
<li>Single Type: Allows only a single instance of the type (e.g. homepage).</li>
</ol>
<p>For our MVP we would need a “Content Type” type model that is of “Collection Type” kind called <code class="language-inline-text">article</code>. We will create is using CLI as follows:</p>
<div class="gridsome-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ strapi generate:api article title:string summary:string body:richtext --draft-and-publish</code></pre></div>
<p>We would also like to add a cover image attribute to this model. But since this depends on <code class="language-inline-text">strapi-plugin-upload</code> it is easier to do this using the admin panel:</p>
<p><a href="https://drive.google.com/file/d/1HqgLM6vcMK0z6xtwKI6Abe75TOVe8Es3/view?source=post_page-----f94466b765a2--------------------------------" target="_blank" rel="nofollow noopener noreferrer">Adding image field to model</a></p>
<p>Next we need to model our home page. As the home page is primarily a collection of existing <code class="language-inline-text">articles</code> we would need to create a “Component” type model that is of “Single Type” kind called <code class="language-inline-text">homepage</code>. There is no CLI options provided to create this type so we can use the <a href="https://strapi.io/documentation/user-docs/latest/content-types-builder/introduction-to-content-types-builder.html" target="_blank" rel="nofollow noopener noreferrer">Content-Types Builder</a> in the admin panel to create this type.</p>
<p>First we build an <code class="language-inline-text">ArticleCard</code> component that would store the necessary information to display a story on the home page. This component would be reused to create the different layouts of the homepage.</p>
<img src="/blog/exploring-headless-cms/2.webp">
<p>Next we would create three additional components for the three different layouts:</p>
<ul>
<li><strong>OneTopStory:</strong> Contains <code class="language-inline-text">ArticleCard</code> as single component.</li>
</ul>
<img src="/blog/exploring-headless-cms/3.webp">
<ul>
<li><strong>TwoTopStories</strong>: Contains <code class="language-inline-text">ArticleCard</code> as repeatable component with validation rules of max and min value of 2.</li>
</ul>
<img src="/blog/exploring-headless-cms/4.webp">
<ul>
<li><strong>ThreeTopStories</strong>:Contains <code class="language-inline-text">ArticleCard</code> as repeatable component with validation rules of max and min value of 3.</li>
</ul>
<img src="/blog/exploring-headless-cms/5.webp">
<p>Strapi has a powerful native feature called <a href="https://strapi.io/blog/release-beta-18-dynamic-zones" target="_blank" rel="nofollow noopener noreferrer">Dynamic Zones</a> which allows you to create complex UI structure dynamically. Using Dynamic Zones we can quickly implement the feature that would allow the editor to choose between the three different layout without having to write any code.</p>
<p><a href="https://drive.google.com/file/d/1SGBURC-35XAok7qnIM8KuMMfMzGr1pwC/view?source=post_page-----f94466b765a2--------------------------------" target="_blank" rel="nofollow noopener noreferrer">Create Homepage model</a></p>
<p><strong>Querying content</strong></p>
<p>With the content modelling completed for our MVP we can add content and query them in GraphQL playground at <a href="http://localhost:1337/graphql" target="_blank" rel="nofollow noopener noreferrer">http://localhost:1337/graphql</a></p>
<p><strong>A few additional learning:</strong></p>
<ul>
<li>The API endpoint and admin panel are the same code. This simplifies adding your own customization and business logic. The downside off course is that you are responsible for managing the API endpoint.</li>
<li>Strapi provides <a href="https://strapi.io/documentation/developer-docs/latest/concepts/models.html#lifecycle-hooks" target="_blank" rel="nofollow noopener noreferrer">lifecycle hooks</a> for models. This can be very helpful if you want to perform custom business logic before returning results.</li>
<li><a href="https://strapi.io/documentation/developer-docs/latest/concepts/policies.html#policies" target="_blank" rel="nofollow noopener noreferrer">Policies</a> allows you to implement cross-cutting concerns easily.</li>
<li>Limited document workflow. Currently, it only supports “Draft” and “Publish” workflow.</li>
<li>Deleting content types is not straightforward. It required manually deleting model/api files and restarting the server.</li>
</ul>
<h1 id="toc-section-4"><a href="#sanity" aria-hidden="true"><span class="icon icon-link"></span></a>Sanity</h1>
<p><a href="https://www.sanity.io" target="_blank" rel="nofollow noopener noreferrer">Sanity</a> is another popular headless CMS. Sanity manages the storage layer and provides a custom open source query language <a href="https://www.sanity.io/docs/overview-groq" target="_blank" rel="nofollow noopener noreferrer">GROQ</a> to query for content. Sanity Studio is used to work with content.</p>
<p><strong>Setup</strong></p>
<p>Below is how we would quickly setup a Sanity project using <a href="https://strapi.io/documentation/developer-docs/latest/installation/cli.html" target="_blank" rel="nofollow noopener noreferrer">command line</a>:</p>
<div class="gridsome-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ npm install -g @sanity/cli
$ sanity init -y --create-project "Sanity Publishing Demo" \
  --dataset publishing-demo \
  --visibility private</code></pre></div>
<p><strong>Note</strong>: If you want to start from scratch for project template choose <em>“Clean project with no predefined schemas”</em></p>
<p>Next we start Sanity Studio</p>
<div class="gridsome-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ sanity start</code></pre></div>
<p>Sanity Studio should now be accessible at <a href="http://localhost:3333/desk" target="_blank" rel="nofollow noopener noreferrer">http://localhost:3333/</a>. If you didn’t select any pre-existing template you would see the following message:</p>
<blockquote>
<p>Empty schema</p>
<p>Your schema does not contain any document types. If it did, those types would be listed here. Read more about how to add schema types.</p>
</blockquote>
<p>So let’s create our document types.</p>
<p><strong>Content Modeling</strong></p>
<p><a href="https://www.sanity.io/docs/content-modelling" target="_blank" rel="nofollow noopener noreferrer">Creating models</a> in Sanity is a manual process that requires creating JavaScript files to define the models in your system. Sanity supports a number of <a href="https://www.sanity.io/docs/schema-types" target="_blank" rel="nofollow noopener noreferrer">schema types</a>. The two important types that we will use are:</p>
<ul>
<li><a href="https://www.sanity.io/docs/document-type" target="_blank" rel="nofollow noopener noreferrer">document</a>: Traditional model that represent an entities in your system like post, tags, etc..</li>
<li><a href="https://www.sanity.io/docs/object-type" target="_blank" rel="nofollow noopener noreferrer">object</a>: Represents a custom collection of information (e.g. card component containing an image, title and summary fields).</li>
</ul>
<p>For our MVP we would need a document type called <code class="language-inline-text">article</code>. Inside <code class="language-inline-text">schemas</code> folder of your project create a file called <code class="language-inline-text">article.</code>js with following lines of code:</p>
<div class="gridsome-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"article"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"Article"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"document"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">fields</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"title"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"Title"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"string"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"cover"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"image"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"Cover"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">hotspot</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"slug"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"Slug"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"slug"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">source</span><span class="token operator">:</span> <span class="token string">"title"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">maxLength</span><span class="token operator">:</span> <span class="token number">96</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"summary"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"Summary"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"string"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"body"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"Body"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"string"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>Next we need to tell Sanity about our new document type by adding it to <code class="language-inline-text">schemas/schema.js</code></p>
<div class="gridsome-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> createSchema <span class="token keyword">from</span> <span class="token string">"part:@sanity/base/schema-creator"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> schemaTypes <span class="token keyword">from</span> <span class="token string">"all:part:@sanity/base/schema-type"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> article <span class="token keyword">from</span> <span class="token string">"./article"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createSchema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">types</span><span class="token operator">:</span> schemaTypes<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>article<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Sanity Studio reloads and now you should see the <code class="language-inline-text">Article</code> document type listed under “Content”.</p>
<img src="/blog/exploring-headless-cms/6.webp">
<p>Next we will replicate the steps we followed in Strapi by creating the necessary object types as follows:</p>
<ol>
<li><code class="language-inline-text">[articleCard](https://gist.github.com/jahangiranwari/6b380ad5285fffeb2ed3b3001dcb12ba)</code>: contains <code class="language-inline-text">headline</code> , <code class="language-inline-text">summary</code> and <code class="language-inline-text">cover</code> attributes along with a reference to <code class="language-inline-text">article</code></li>
<li><code class="language-inline-text">[oneTopStory](https://gist.github.com/jahangiranwari/545e42fe3a6b109d846df7f8e1d75855)</code>: contains <code class="language-inline-text">articleCard</code> as single field.</li>
<li><code class="language-inline-text">[topTwoStories](https://gist.github.com/jahangiranwari/33f1b0618e6a1a3c0c2a544599f0c60e)</code>: contains two <code class="language-inline-text">articleCard</code> as fields grouped in <a href="https://www.sanity.io/docs/object-type#fieldsets-b8b5507db1d3" target="_blank" rel="nofollow noopener noreferrer">fieldset</a>.</li>
<li><code class="language-inline-text">[topThreeStories](https://gist.github.com/jahangiranwari/cdf70413a6ebd6813c648c0cfcc40a0d)</code>: contains three <code class="language-inline-text">articleCard</code> as fields grouped in <a href="https://www.sanity.io/docs/object-type#fieldsets-b8b5507db1d3" target="_blank" rel="nofollow noopener noreferrer">fieldset</a>.</li>
<li><code class="language-inline-text">[topStories](https://gist.github.com/jahangiranwari/a6f68e4742dc1cd33eaaf0b93b93733c)</code>: applies <a href="https://www.sanity.io/guides/how-to-use-structured-content-for-page-building" target="_blank" rel="nofollow noopener noreferrer">page builder pattern</a> that allows editor to select one of the three layouts.</li>
</ol>
<p>With the required object types in place we can now create a <code class="language-inline-text">homepage</code>document type that has a single <code class="language-inline-text">topStories</code> field.</p>
<div class="gridsome-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"homepage"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"document"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"Home Page"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">fields</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"topStories"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"topStories"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>After creating the required types our <code class="language-inline-text">schema.js</code> looks like this:</p>
<div class="gridsome-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> createSchema <span class="token keyword">from</span> <span class="token string">"part:@sanity/base/schema-creator"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> schemaTypes <span class="token keyword">from</span> <span class="token string">"all:part:@sanity/base/schema-type"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> article <span class="token keyword">from</span> <span class="token string">"./article"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> articleCard <span class="token keyword">from</span> <span class="token string">"./objects/articleCard"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> oneTopStory <span class="token keyword">from</span> <span class="token string">"./objects/oneTopStory"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> topTwoStories <span class="token keyword">from</span> <span class="token string">"./objects/topTwoStories"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> topThreeStories <span class="token keyword">from</span> <span class="token string">"./objects/topThreeStories"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> topStories <span class="token keyword">from</span> <span class="token string">"./objects/topStories"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> homepage <span class="token keyword">from</span> <span class="token string">"./homepage"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createSchema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">types</span><span class="token operator">:</span> schemaTypes<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    article<span class="token punctuation">,</span>
    articleCard<span class="token punctuation">,</span>
    oneTopStory<span class="token punctuation">,</span>
    topTwoStories<span class="token punctuation">,</span>
    topThreeStories<span class="token punctuation">,</span>
    topStories<span class="token punctuation">,</span>
    homepage
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Once Sanity reloads we can see our HomePage type available in Sanity Studio:</p>
<img src="/blog/exploring-headless-cms/7.webp">
<p><strong>Querying content</strong></p>
<p>With the content modelling completed for our MVP we can add content and query them in GraphQL playground. But before we can query in GraphQL we need to deploy</p>
<div class="gridsome-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ sanity login
$ sanity graphql deploy</code></pre></div>
<p>Once the deployment completes the GraphQL playground is accessible at <a href="https://%5C%5BprojectId%5C%5D.api.sanity.io/v1/graphql/%5C%5Bdataset%5C%5D/default" target="_blank" rel="nofollow noopener noreferrer">https://\[projectId\].api.sanity.io/v1/graphql/\[dataset\]/default</a></p>
<p><strong>A few additional learning:</strong></p>
<ul>
<li>To retrieve content Sanity provides multiple CDN backed endpoints (i.e. <a href="https://www.sanity.io/docs/api-cdn" target="_blank" rel="nofollow noopener noreferrer">API CDN</a>, <a href="https://www.sanity.io/docs/asset-cdn" target="_blank" rel="nofollow noopener noreferrer">Asset CDN</a>). This makes your backend robust. The downside is that your ability to perform customization on the backend is limited.</li>
<li>As Sanity Studio is a React app it can be easily extended.</li>
<li>Sanity Studio can be customized for complex layout <a href="https://www.sanity.io/docs/overview-structure-builder" target="_blank" rel="nofollow noopener noreferrer">Structure Builder</a>.</li>
<li>You can implement a <a href="https://www.sanity.io/docs/custom-workflows" target="_blank" rel="nofollow noopener noreferrer">custom document workflow</a>.</li>
<li><a href="https://www.sanity.io/docs/access-control#custom-access-control-ce4a077926aa" target="_blank" rel="nofollow noopener noreferrer">Custom access control</a> is available in enterprise plan.</li>
<li><a href="https://www.sanity.io/docs/localization" target="_blank" rel="nofollow noopener noreferrer">Localization</a> can be done at field or document level. But it requires some effort in getting it setup.</li>
</ul>
<h1 id="toc-section-5"><a href="#contentful" aria-hidden="true"><span class="icon icon-link"></span></a>Contentful</h1>
<p><a href="https://www.contentful.com/" target="_blank" rel="nofollow noopener noreferrer">Contentful</a> is another well known headless CMS. Unlike Sanity and Strapi the admin interface is hosted by Contentful.</p>
<p><strong>Setup</strong></p>
<p>To create a Contentful application we first need to create a space. <a href="https://www.contentful.com/help/contentful-101/" target="_blank" rel="nofollow noopener noreferrer">This guide</a> provides a good explanation of setting up a space.</p>
<p><strong>Content Modeling</strong></p>
<p>Contentful support creating <a href="https://www.contentful.com/developers/docs/concepts/data-model/" target="_blank" rel="nofollow noopener noreferrer">custom types</a> and provides a number of field types. The <a href="https://github.com/contentful/contentful-cli/tree/master/docs" target="_blank" rel="nofollow noopener noreferrer">CLI tool</a> currently doesn’t support creating content types from command line. So we use the content management web app to create the models. Under “Content model” we create <code class="language-inline-text">Article</code> type with following fields:</p>
<img src="/blog/exploring-headless-cms/8.webp">
<p>For home page content type tried to create reusable component like <code class="language-inline-text">ArticleCard</code>by following this <a href="https://www.contentful.com/blog/2019/01/11/building-flexible-content-models-budget/" target="_blank" rel="nofollow noopener noreferrer">blog post</a> but could not get it working. So ended up with a working but not ideal solution of creating a <em>1-many</em> reference to articles and a checkbox to select a layout. This solution has no validations and relies on editor making the correct selections.</p>
<img src="/blog/exploring-headless-cms/9.webp">
<p><strong>Querying content</strong></p>
<p>With the content modelling completed for our MVP we can add content and query them in GraphQL playground. To do that we would need to install the app first by going to <a href="https://app.contentful.com/spaces/%5Bspace-id%5D/apps?app=graphql-playground" target="_blank" rel="nofollow noopener noreferrer">https://app.contentful.com/spaces/[space-id]/apps?app=graphql-playground</a></p>
<p>After installation you can access the GraphQL playground at this URL: <a href="https://app.contentful.com/spaces/%5Bspace-id%5D/apps/app_installations/graphql-playground/graphql" target="_blank" rel="nofollow noopener noreferrer">https://app.contentful.com/spaces/[space-id]/apps/app_installations/graphql-playground/graphql</a></p>
<p><strong>A few additional learning:</strong></p>
<ul>
<li>Existing apps are available for installation from Contentful’s <a href="https://www.contentful.com/marketplace/" target="_blank" rel="nofollow noopener noreferrer">marketplace</a>.</li>
<li>Has rich validation and appearance options for fields.</li>
<li>Has <a href="https://www.contentful.com/developers/docs/tutorials/general/setting-locales/" target="_blank" rel="nofollow noopener noreferrer">localization</a> support out-of-the-box.</li>
<li>Adding custom behaviour to the admin interface requires developing a custom extension by following the painful approach of <a href="https://contentful.com/developers/docs/extensibility/app-framework/create-contentful-app/" target="_blank" rel="nofollow noopener noreferrer">creating a contentful app</a> and then installing it to your space.</li>
<li>Similar to Sanity, Contentful provides multiple <a href="https://www.contentful.com/developers/docs/concepts/apis/" target="_blank" rel="nofollow noopener noreferrer">CDN backed APIs</a> (e.g. Content Delivery API, Images API, etc.)</li>
<li>Running a few nested GraphQL queries to retrieve embedded entries information would too often result in TOO_COMPLEX_QUERY error. Could be because I was using a “free” space.</li>
</ul>
<h1 id="toc-section-6"><a href="#conclusion" aria-hidden="true"><span class="icon icon-link"></span></a>Conclusion</h1>
<p>Headless CMS provides a quick and flexible way of managing and pulling content. However, choosing between the different solutions available depends on specific requirements of the project. Below are a few requirements and suggestion on which would be the suitable CMSes.</p>
<ul>
<li>Full control: Strapi</li>
<li>Execute custom business logic when handling API query: Strapi</li>
<li>Ease of customization content management interface: Strapi / Sanity</li>
<li>Ease of creating custom types: Strapi / Contentful</li>
<li>Out-of-the-box CDN support for API endpoints: Sanity / Contentful</li>
<li>Localization: Contentful</li>
<li>Marketplace: Contentful / Sanity</li>
</ul>
<blockquote>
<p>Hello Montreal! We’ll be at the <a href="https://startupfestival.com/" target="_blank" rel="nofollow noopener noreferrer">Startupfest ’22</a> all three days, so drop by and say hi. We’d love to see what you’re building, and early birds get a free (limited) design audit or tech consultation. DM us on Twitter (<a href="https://twitter.com/tarkalabs" target="_blank" rel="nofollow noopener noreferrer">@tarkalabs</a>) and let’s talk.</p>
</blockquote>
</div><hr data-v-996dafb6><div class="inner-section" data-v-996dafb6><div class="author-basic-info" data-v-996dafb6><img src="/assets/img/jahangir.a85718b1.jpeg" alt="Jahangir Anwari" width="64" data-v-996dafb6><div data-v-996dafb6><p class="heading-size-9 capitalize" data-v-996dafb6>Jahangir Anwari</p><p class="body-jetbrains-size-10" data-v-996dafb6>
            Developer
          </p></div></div><p class="body-opensans-size-9" data-v-996dafb6>He is still thinking what to write about him</p><div class="social-links" data-v-996dafb6><!----><!----><a href="https://medium.com/@janwari" target="_blank" class="heading-size-9" data-v-996dafb6>
          Medium
        </a></div></div><hr data-v-996dafb6><div class="related-articles" data-v-996dafb6><div class="flex-space-between" data-v-996dafb6><p class="heading-size-7" data-v-996dafb6>_related articles</p><a href="/blogs" class="heading-size-9 underline" data-v-996dafb6>View all</a></div><div class="flex-space-between blog-card-wrapper" data-v-996dafb6><a href="/blogs/building-scalable-ingestion-pipeline-rust" class="blog-card" data-v-996dafb6><img src="/assets/img/pipeline-cover.4796ea68.webp" alt="" class="thumbnail" data-v-996dafb6><div class="info" data-v-996dafb6><p class="heading-size-10 capitalize" data-v-996dafb6>/web</p><h3 data-v-996dafb6>Building a Scalable Ingestion Pipeline with Rust</h3><p class="body-jetbrains-size-10" data-v-996dafb6>
              Dhruva Sagar   5 min read
            </p></div></a><a href="/blogs/inserting-millions-of-records-in-java" class="blog-card" data-v-996dafb6><img src="/assets/img/image-2.d7113a92.webp" alt="Inserting Millions of Records in Java: Strategies and Benchmarks" class="thumbnail" data-v-996dafb6><div class="info" data-v-996dafb6><p class="heading-size-10 capitalize" data-v-996dafb6>/web</p><h3 data-v-996dafb6>Inserting Millions of Records in Java: Strategies and Benchmarks</h3><p class="body-jetbrains-size-10" data-v-996dafb6>
              Kesavan   11 min read
            </p></div></a></div></div><div class="lets-talk" data-v-188e6a71><div class="message heading-size-7" data-v-188e6a71>
    Let’s build digital solutions together.
  </div><div class="action-container" data-v-188e6a71><div class="action-button heading-size-5" data-v-188e6a71><div data-v-188e6a71>Get in touch</div><div class="arrow" data-v-188e6a71>-&gt;</div></div><img src="/assets/img/talk.71d1d2f3.svg" alt="Lenny Face" data-v-188e6a71></div></div></div></div><div data-v-996dafb6></div></div><div id="footer" class="baseLayout" data-v-996dafb6 data-v-71a2ecff><div data-v-996dafb6></div><div data-v-996dafb6><div class="site-footer" data-v-0a037a4b data-v-71a2ecff><ul class="main-nav footer" data-v-1c6945ef data-v-0a037a4b><div class="primary fadeIn" data-v-1c6945ef><li data-v-1c6945ef><a href="/music-tech" data-v-1c6945ef>/MusicTech</a></li><li data-v-1c6945ef><a href="/health-care-tech" data-v-1c6945ef>/HealthCareTech</a></li><li data-v-1c6945ef><a href="/genai" data-v-1c6945ef>/GenAI</a></li><li data-v-1c6945ef><a href="https://solutions.tarkalabs.com/design/" target="_self" data-v-1c6945ef>/Design</a></li><li data-v-1c6945ef><a href="/develop" data-v-1c6945ef>/Develop</a></li><li data-v-1c6945ef><a href="/case-studies" data-v-1c6945ef>
        /Case_Studies
      </a></li><li data-v-1c6945ef><a href="/careers" data-v-1c6945ef>/Careers</a></li><li data-v-1c6945ef><a href="/about" data-v-1c6945ef>/About</a></li><li data-v-1c6945ef><a href="/contact" data-v-1c6945ef>/Contact</a></li></div></ul><div class="subnav" data-v-0a037a4b><ul class="sub body-jetbrains-size-11 footer fadeIn" data-v-3cc3824e data-v-0a037a4b><li data-v-3cc3824e><a href="/blogs" class="active" data-v-3cc3824e>/blogs</a></li><li data-v-3cc3824e><a href="/talks" data-v-3cc3824e>/talks</a></li><li data-v-3cc3824e><a href="/train" data-v-3cc3824e>/train</a></li></ul><div data-v-fae945d8 data-v-0a037a4b><a href="https://twitter.com/tarkalabs" target="_blank" rel="noopener" class="external" data-v-fae945d8>Twitter</a><a href="https://in.linkedin.com/company/tarka-labs" target="_blank" rel="noopener" class="external" data-v-fae945d8>LinkedIn</a></div><div class="sedin" data-v-0a037a4b><a href="https://sedintechnologies.com/" target="_blank" rel="noopener" class="external" data-v-0a037a4b>Tarka Labs is a division of Sedin Technologies</a></div></div></div></div><div data-v-996dafb6></div></div></div></div></div>
    <script src="/assets/js/app.5549cb77.js" defer></script><script src="/assets/js/page--src--templates--blog-vue.18adb478.js" defer></script><script data-vue-tag="ssr" src="https://unpkg.com/@lottiefiles/lottie-player@0.4.0/dist/lottie-player.js" data-body="true"></script>
  </body>
</html>
