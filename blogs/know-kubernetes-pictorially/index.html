<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Know Kubernetes - Pictorially · Tarka Labs - Tarka Labs</title><meta name="gridsome:hash" content="4e835d287785e482d873833e927668661a23737e"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="viewport" content="width=device-width, initial-scale=1.0"><meta data-vue-tag="ssr" property="og:title" content="Know Kubernetes - Pictorially · Tarka Labs"><meta data-vue-tag="ssr" property="og:description" content="Understand kubernetes and its components with easily relatable pictorial representations."><meta data-vue-tag="ssr" property="og:image" content="/assets/img/default-cover.55254b66.png"><meta data-vue-tag="ssr" property="og:image:height" content="627"><meta data-vue-tag="ssr" property="og:image:width" content="1200"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.92f6d0f06feb6aec5e019521ff224fd8.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.92f6d0f06feb6aec5e019521ff224fd8.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.92f6d0f06feb6aec5e019521ff224fd8.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.92f6d0f06feb6aec5e019521ff224fd8.png"><link rel="preload" href="/assets/css/0.styles.caf054be.css" as="style"><link rel="preload" href="/assets/js/app.5549cb77.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--blog-vue.18adb478.js" as="script"><link rel="stylesheet" href="/assets/css/0.styles.caf054be.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
    <meta
      name="google-site-verification"
      content="j7cLUK-kxGEpMOY7valSkamH4kQe_l38yMMAXbpk19U"
    />
    <noscript>
      <div class="noscript-container">
        <a href="/" class="noscript-logo">Tarka <br />_Labs</a>
        <div class="noscript-text-container">
          <h1>Uh oh! Looks like <span>JavaScript</span> is disabled.</h1>
          <p>
            Bitman requires <span>JavaScript</span> to fuel his thirst to end
            bad UX and lazy design, which is necessary to give you the best
            viewing experience possible. Please enable it to continue to our
            website.
          </p>
        </div>
      </div>
    </noscript>
  </head>

  <body >
    <div><div id="app" data-server-rendered="true" data-v-71a2ecff><div data-v-71a2ecff><div id="banner-section" data-v-71a2ecff><div class="banner" style="background:;display:none;" data-v-71a2ecff><div class="layout" data-v-71a2ecff><div data-v-71a2ecff></div><div class="hero heading-size-5" style="color:#ffffff;" data-v-71a2ecff></div><div data-v-71a2ecff></div></div></div><div data-v-71a2ecff></div></div><div class="sidebar" data-v-d6d2017e data-v-71a2ecff><div class="nav" data-v-d6d2017e><div class="fixed" data-v-d6d2017e><a href="/" data-v-9b1a4c9c data-v-d6d2017e> TARKA<br data-v-9b1a4c9c>_LABS </a><div class="menu" data-v-50705736 data-v-d6d2017e><div class="control" style="stroke:black;" data-v-50705736><div class="spinner heading-size-9" data-v-02ea7230 data-v-50705736><span class="side-menu-symbol" data-v-02ea7230><span class="menu-symbol rotate180t90" data-v-02ea7230><svg height="10" width="10" data-v-02ea7230><line x1="0" y1="5" x2="10" y2="5" style="stroke-width: 2" data-v-02ea7230></line></svg></span><span class="menu-symbol rotate90t0" data-v-02ea7230><svg height="10" width="10" data-v-02ea7230><line x1="0" y1="5" x2="10" y2="5" style="stroke-width: 2" data-v-02ea7230></line></svg></span></span><span style="vertical-align: middle" data-v-02ea7230> menu </span></div><div class="active-page body-jetbrains-size-11 fade-in" data-v-128e5feb data-v-50705736>
  
</div></div><div class="items hidden" data-v-50705736><ul class="main-nav" data-v-1c6945ef data-v-50705736><div class="primary fadeOut sidebar" data-v-1c6945ef><li data-v-1c6945ef><a href="/music-tech" data-v-1c6945ef>/MusicTech</a></li><li data-v-1c6945ef><a href="/health-care-tech" data-v-1c6945ef>/HealthCareTech</a></li><li data-v-1c6945ef><a href="/genai" data-v-1c6945ef>/GenAI</a></li><li data-v-1c6945ef><a href="https://solutions.tarkalabs.com/design/" target="_self" data-v-1c6945ef>/Design</a></li><li data-v-1c6945ef><a href="/develop" data-v-1c6945ef>/Develop</a></li><li data-v-1c6945ef><a href="/case-studies" data-v-1c6945ef>
        /Case_Studies
      </a></li><li data-v-1c6945ef><a href="/careers" data-v-1c6945ef>/Careers</a></li><li data-v-1c6945ef><a href="/about" data-v-1c6945ef>/About</a></li><li data-v-1c6945ef><a href="/contact" data-v-1c6945ef>/Contact</a></li></div></ul><ul class="sub body-jetbrains-size-11 fadeOut sidebar" data-v-3cc3824e data-v-50705736><li data-v-3cc3824e><a href="/blogs" class="active" data-v-3cc3824e>/blogs</a></li><li data-v-3cc3824e><a href="/talks" data-v-3cc3824e>/talks</a></li><li data-v-3cc3824e><a href="/train" data-v-3cc3824e>/train</a></li></ul></div></div><a href="/contact" class="heading-size-9" data-v-573e12d8 data-v-d6d2017e>
  Get in<br data-v-573e12d8>touch<span class="arrow" data-v-573e12d8>-&gt;</span></a></div></div><!----></div><div class="baseLayout" data-v-996dafb6 data-v-71a2ecff><div data-v-996dafb6></div><div data-v-996dafb6><div class="blog-details-page" data-v-996dafb6><div class="inner-section" data-v-996dafb6><p class="heading-size-10 capitalize" data-v-996dafb6>
        /web - 7 min read
      </p><h1 class="title" data-v-996dafb6>Know Kubernetes - Pictorially</h1><div class="author-basic-info" data-v-996dafb6><img src="/assets/img/sudhakar.84c96111.jpg" alt="Sudhakar Rayavaram" width="64" data-v-996dafb6><div data-v-996dafb6><p class="heading-size-9 capitalize" data-v-996dafb6>Sudhakar Rayavaram</p><p class="body-jetbrains-size-10" data-v-996dafb6>
            Developer
          </p></div></div></div><img src="/assets/img/default-cover.55254b66.png" alt="Black and white sketch of a square room labelled 'MASTER' with the following items: disk pack, chest of drawers with a wifi signal-emitting device on top, and two tables" class="header-img" data-v-996dafb6><div class="toc-wrapper" data-v-996dafb6><h2 class="heading-size-7" data-v-996dafb6>Table of contents</h2><div class="toc" data-v-996dafb6><a href="#content" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/01</p><p data-v-996dafb6>Intro</p></a><a href="#toc-section-1" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/02</p><p data-v-996dafb6>Container</p></a><a href="#toc-section-2" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/03</p><p data-v-996dafb6>When to use Kubernetes?</p></a><a href="#toc-section-3" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/04</p><p data-v-996dafb6>Why I prefer Kubernetes</p></a><a href="#toc-section-4" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/05</p><p data-v-996dafb6>Kubernetes Architecture</p></a><a href="#toc-section-5" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/06</p><p data-v-996dafb6>Controllers</p></a><a href="#toc-section-6" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/07</p><p data-v-996dafb6>ReplicaSet</p></a><a href="#toc-section-7" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/08</p><p data-v-996dafb6>Deployment</p></a><a href="#toc-section-8" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/09</p><p data-v-996dafb6>Service</p></a><a href="#toc-section-9" class="heading-size-9 heading" data-v-996dafb6><p data-v-996dafb6>/10</p><p data-v-996dafb6>Ingress</p></a></div></div><div id="content" class="content" data-v-996dafb6><p>Recently, I started my Kubernetes journey and wanted to understand its internals better. I did a talk on these lines and here is the blog version of it.</p>
<h1 id="toc-section-1"><a href="#container" aria-hidden="true"><span class="icon icon-link"></span></a>Container</h1>
<p>Before we try to understand Kubernetes, Let us spend little time on clarifying what a container is, and why they are so popular. After all, there is no point in talking about containers orchestrator (Kubernetes) without knowing what a container is :)</p>
<figure><img src="/blog/know-kubernetes-pictorially/container.png" alt="Container"><figcaption>Container</figcaption></figure>
<p>A “container” is… a container to hold all the stuff you put in. Duh!</p>
<p>Stuff like your application code, dependent libraries, and its dependencies all the way up to the kernel. The key concept here is isolation. Isolate all your stuff from the rest so that you have better control of them. There are three types of isolation provided by containers</p>
<ul>
<li>Workspace isolation (Process, Network)</li>
<li>Resource isolation (CPU, Memory)</li>
<li>File system isolation (Union File System)</li>
</ul>
<p>Think of containers like VMs on diet. They are lean, fast (to startup) and small. And, all this was not built ground up. Instead, they used the constructs (like cgroups, namespaces) present in linux system to build a nice abstraction over it</p>
<p>Now we know what containers are, It is easy to understand why they are very popular. Instead of just shipping only your application binary / code, It is possible to ship the whole environment needed to run your application in a practical way as containers can be built as very small units. A perfect fix for “It works in my machine” issue</p>
<h1 id="toc-section-2"><a href="#when-to-use-kubernetes" aria-hidden="true"><span class="icon icon-link"></span></a>When to use Kubernetes?</h1>
<p>All is well with containers and software developers life is much better now. Then why do we need another piece of technology, a container orchestrator like Kubernetes?</p>
<img src="/blog/know-kubernetes-pictorially/hand.webp">
<p>You need it when you get to this state, where there are too many containers to manage</p>
<p>Q: Where is my front end container, how many of them am I running? <br>
A: Hard to tell. Use a container orchestrator</p>
<p>Q: How will I make my front end containers to talk to newly created backend containers? <br>
A: Hardcode the IPs. Or, Use a container orchestrator</p>
<p>Q: How will I do rolling upgrades? <br>
A: Manually hand holding in each step. Or, Use a container orchestrator</p>
<h1 id="toc-section-3"><a href="#why-i-prefer-kubernetes" aria-hidden="true"><span class="icon icon-link"></span></a>Why I prefer Kubernetes</h1>
<p>There are multiple orchestrators like docker swarm, Mesos and Kubernetes. My choice is Kubernetes (and hence this article) because Kubernetes is …</p>
<img src="/blog/know-kubernetes-pictorially/prefer.webp">
<p>… like lego blocks. It not only has the components needed to run a container orchestrator at scale, but also has the flexibility to swap different components in and out with custom ones. Want to have a custom scheduler, sure just plug it in. Need to have a new resource type, write a CRD. Also, the community is very active and evolving the tool rapidly</p>
<h1 id="toc-section-4"><a href="#kubernetes-architecture" aria-hidden="true"><span class="icon icon-link"></span></a>Kubernetes Architecture</h1>
<img src="/blog/know-kubernetes-pictorially/kubernetes-architecture.webp">
<p>Every Kubernetes cluster has two types of nodes (machines). Master and a Worker. As the name suggests, Master is to control and monitor the cluster where as the worker runs the payload (applications)</p>
<p>A cluster could work with a single master node. But better to have three of them for high availability (Known as HA Clusters)</p>
<p>Let us take a closer look at the master and what it is composed of</p>
<img src="/blog/know-kubernetes-pictorially/master.webp">
<p><strong>etcd</strong> : Database to store all the data about kubernetes objects, their current state, access information and other cluster config information</p>
<p><strong>API Server</strong> : RESTful API server that exposes end points to operate the cluster. Almost all of the components in master and worker nodes communicates to this server to perform their duties</p>
<p><strong>Scheduler</strong> : Responsible to decide which payload needs to run in which machine</p>
<p><strong>Control Manager</strong> : It is a control loop that watches the state of the cluster (gets this data by making calls to API server) and takes actions to bring it to the expected state</p>
<img src="/blog/know-kubernetes-pictorially/worker.webp">
<p><strong>kubelet</strong> : Is the heart of the worker node. It communicates with the master node API server and runs the containers scheduled for its node</p>
<p><strong>kube Proxy</strong> : Takes care of networking needs of pods using IP tables / IPVS</p>
<p><strong>Pod</strong> : The work horse of kubernetes which runs all your containers. You cannot run a containers inside kubernetes without a pod abstraction over it. A pod adds functionalities that is crucial to kuberenetes way of networking between containers</p>
<img src="/blog/know-kubernetes-pictorially/happy-pod.webp">
<p>A pod could have more than one container and all the servers running inside these containers can see each other as localhosts. This makes it very convenient to separate different aspects of your app as separate containers and load them all together as one pod. There are different pod patterns like sidecar, proxy and ambassador to address different needs. Check this article to learn more about them</p>
<p>Pod networking interface provides a mechanism to network it with other pods in the same nodes and other worker nodes</p>
<img src="/blog/know-kubernetes-pictorially/network.webp">
<p>Also, each pod will be assigned its own IP address which is used by kube-proxy to route traffic. And this IP address is visible only within the cluster</p>
<p>A volume mounted inside a pod is also visible to all the containers and sometimes these volumes can be used to communicate asynchronously between the pods. For example, say your app is a photo uploading app (like instagram may be), it could save these file in a volume and another container in the same pod can watch for new files in this volume and start processing it to create multiple sizes and upload them to cloud storage</p>
<h1 id="toc-section-5"><a href="#controllers" aria-hidden="true"><span class="icon icon-link"></span></a>Controllers</h1>
<p>In kubernetes, there are a lot of controllers like ReplicaSet, Replication Controllers, Deployments, StatefulSets and Service. These are objects that control pods in one way or another. Let us look at some of the important ones</p>
<h1 id="toc-section-6"><a href="#replicaset" aria-hidden="true"><span class="icon icon-link"></span></a>ReplicaSet</h1>
<figure><img src="/blog/know-kubernetes-pictorially/replica-set.webp" alt="ReplicaSet doing what it is good at. Replicating pods"><figcaption>ReplicaSet doing what it is good at. Replicating pods</figcaption></figure>
<p>The main responsibility of this controller is to create replicas of the given pod. If a pod dies for some reason, this controller will be notified and it immediately jumps into action to create a new pod</p>
<h1 id="toc-section-7"><a href="#deployment" aria-hidden="true"><span class="icon icon-link"></span></a>Deployment</h1>
<figure><img src="/blog/know-kubernetes-pictorially/deployment.webp" alt="Deployment (with a messy hair) trying to control the ReplicaSet"><figcaption>Deployment (with a messy hair) trying to control the ReplicaSet</figcaption></figure>
<p>Deployment is a higher order object which uses a ReplicaSet to manage replicas. It provides rolling upgrades by scaling up a new ReplicaSet and scaling down (eventually removing) an existing ReplicaSet</p>
<h1 id="toc-section-8"><a href="#service" aria-hidden="true"><span class="icon icon-link"></span></a>Service</h1>
<figure><img src="/blog/know-kubernetes-pictorially/service.webp" alt="Service represented as a drone delivering data packets to corresponding pods"><figcaption>Service represented as a drone delivering data packets to corresponding pods</figcaption></figure>
<p>Service is a controller object whose prime responsibility is to work as a load balancer in distributing the “packets” to the corresponding nodes. It is basically a controller construct to group similar pods (usually identified by pod labels) across worker nodes.</p>
<p>Say if your “front-end” app wants to communicate to “back-end” app, there could be many running instances of each. Instead of worrying about hard coding the IPs of every back-end pod, you send the data packets to the back-end service which then decides how to load balance and forwards accordingly</p>
<p>PS: Note that service is more like a virtual entity as all the packet routing is handled by IP tables /IPVS /CNI plugin. It just makes it easier to think of it as a real entity sitting out their to understand its role in the kubernetes ecosystem</p>
<h1 id="toc-section-9"><a href="#ingress" aria-hidden="true"><span class="icon icon-link"></span></a>Ingress</h1>
<figure><img src="/blog/know-kubernetes-pictorially/ingress.webp" alt="Ingress a floating platform through which all the packets flow into the cluster"><figcaption>Ingress a floating platform through which all the packets flow into the cluster</figcaption></figure>
<p>Ingress controller is a single point of contact to the outside world to talk to all the services that are running inside the cluster. This makes it it easy for us to set security policies, monitoring and even logging at a single place</p>
<p>P.S: There are a lot of other controller objects in Kubernetes like DaemonSets, StatefulSets and Jobs. There are also objects like Secrets, ConfigMaps that are used to store application secrets and configurations. I might be covering them in my future blog posts. I have also created a similar post on service mesh which I hope you will find it as useful</p>
<blockquote>
<p>Hi! I’m Sudhakar [su-docker]. I’m a software plumber, health and wellness enthusiast, digital artist, and data visualization lover. Building awesome software and teams at Tarka Labs.</p>
</blockquote>
</div><hr data-v-996dafb6><div class="inner-section" data-v-996dafb6><div class="author-basic-info" data-v-996dafb6><img src="/assets/img/sudhakar.84c96111.jpg" alt="Sudhakar Rayavaram" width="64" data-v-996dafb6><div data-v-996dafb6><p class="heading-size-9 capitalize" data-v-996dafb6>Sudhakar Rayavaram</p><p class="body-jetbrains-size-10" data-v-996dafb6>
            Developer
          </p></div></div><p class="body-opensans-size-9" data-v-996dafb6>Programming is overrated. I mean, there is more to solving a real world problem than writing code</p><div class="social-links" data-v-996dafb6><!----><a href="https://www.linkedin.com/in/sudocker/" target="_blank" class="heading-size-9" data-v-996dafb6>
          LinkedIn
        </a><a href="https://medium.com/@suDocker" target="_blank" class="heading-size-9" data-v-996dafb6>
          Medium
        </a></div></div><hr data-v-996dafb6><div class="related-articles" data-v-996dafb6><div class="flex-space-between" data-v-996dafb6><p class="heading-size-7" data-v-996dafb6>_related articles</p><a href="/blogs" class="heading-size-9 underline" data-v-996dafb6>View all</a></div><div class="flex-space-between blog-card-wrapper" data-v-996dafb6><a href="/blogs/building-scalable-ingestion-pipeline-rust" class="blog-card" data-v-996dafb6><img src="/assets/img/pipeline-cover.4796ea68.webp" alt="" class="thumbnail" data-v-996dafb6><div class="info" data-v-996dafb6><p class="heading-size-10 capitalize" data-v-996dafb6>/web</p><h3 data-v-996dafb6>Building a Scalable Ingestion Pipeline with Rust</h3><p class="body-jetbrains-size-10" data-v-996dafb6>
              Dhruva Sagar   5 min read
            </p></div></a><a href="/blogs/inserting-millions-of-records-in-java" class="blog-card" data-v-996dafb6><img src="/assets/img/image-2.d7113a92.webp" alt="Inserting Millions of Records in Java: Strategies and Benchmarks" class="thumbnail" data-v-996dafb6><div class="info" data-v-996dafb6><p class="heading-size-10 capitalize" data-v-996dafb6>/web</p><h3 data-v-996dafb6>Inserting Millions of Records in Java: Strategies and Benchmarks</h3><p class="body-jetbrains-size-10" data-v-996dafb6>
              Kesavan   11 min read
            </p></div></a></div></div><div class="lets-talk" data-v-188e6a71><div class="message heading-size-7" data-v-188e6a71>
    Let’s build digital solutions together.
  </div><div class="action-container" data-v-188e6a71><div class="action-button heading-size-5" data-v-188e6a71><div data-v-188e6a71>Get in touch</div><div class="arrow" data-v-188e6a71>-&gt;</div></div><img src="/assets/img/talk.71d1d2f3.svg" alt="Lenny Face" data-v-188e6a71></div></div></div></div><div data-v-996dafb6></div></div><div id="footer" class="baseLayout" data-v-996dafb6 data-v-71a2ecff><div data-v-996dafb6></div><div data-v-996dafb6><div class="site-footer" data-v-0a037a4b data-v-71a2ecff><ul class="main-nav footer" data-v-1c6945ef data-v-0a037a4b><div class="primary fadeIn" data-v-1c6945ef><li data-v-1c6945ef><a href="/music-tech" data-v-1c6945ef>/MusicTech</a></li><li data-v-1c6945ef><a href="/health-care-tech" data-v-1c6945ef>/HealthCareTech</a></li><li data-v-1c6945ef><a href="/genai" data-v-1c6945ef>/GenAI</a></li><li data-v-1c6945ef><a href="https://solutions.tarkalabs.com/design/" target="_self" data-v-1c6945ef>/Design</a></li><li data-v-1c6945ef><a href="/develop" data-v-1c6945ef>/Develop</a></li><li data-v-1c6945ef><a href="/case-studies" data-v-1c6945ef>
        /Case_Studies
      </a></li><li data-v-1c6945ef><a href="/careers" data-v-1c6945ef>/Careers</a></li><li data-v-1c6945ef><a href="/about" data-v-1c6945ef>/About</a></li><li data-v-1c6945ef><a href="/contact" data-v-1c6945ef>/Contact</a></li></div></ul><div class="subnav" data-v-0a037a4b><ul class="sub body-jetbrains-size-11 footer fadeIn" data-v-3cc3824e data-v-0a037a4b><li data-v-3cc3824e><a href="/blogs" class="active" data-v-3cc3824e>/blogs</a></li><li data-v-3cc3824e><a href="/talks" data-v-3cc3824e>/talks</a></li><li data-v-3cc3824e><a href="/train" data-v-3cc3824e>/train</a></li></ul><div data-v-fae945d8 data-v-0a037a4b><a href="https://twitter.com/tarkalabs" target="_blank" rel="noopener" class="external" data-v-fae945d8>Twitter</a><a href="https://in.linkedin.com/company/tarka-labs" target="_blank" rel="noopener" class="external" data-v-fae945d8>LinkedIn</a></div><div class="sedin" data-v-0a037a4b><a href="https://sedintechnologies.com/" target="_blank" rel="noopener" class="external" data-v-0a037a4b>Tarka Labs is a division of Sedin Technologies</a></div></div></div></div><div data-v-996dafb6></div></div></div></div></div>
    <script src="/assets/js/app.5549cb77.js" defer></script><script src="/assets/js/page--src--templates--blog-vue.18adb478.js" defer></script><script data-vue-tag="ssr" src="https://unpkg.com/@lottiefiles/lottie-player@0.4.0/dist/lottie-player.js" data-body="true"></script>
  </body>
</html>
